"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Enum.js"),r=require("./Utility.js"),a=require("./Tokenizer.js");function s(e,i,l,o,u,f,p,d,b){for(var k=0,m=0,x=p,h=0,v=0,w=0,E=1,j=1,T=1,q=0,A="",C=u,M=f,O=o,g=A;j;)switch(w=q,q=a.next()){case 40:if(108!=w&&58==g.charCodeAt(x-1)){-1!=r.indexof(g+=r.replace(a.delimit(q),"&","&\f"),"&\f")&&(T=-1);break}case 34:case 39:case 91:g+=a.delimit(q);break;case 9:case 10:case 13:case 32:g+=a.whitespace(w);break;case 92:g+=a.escaping(a.caret()-1,7);continue;case 47:switch(a.peek()){case 42:case 47:r.append(c(a.commenter(a.next(),a.caret()),i,l),b);break;default:g+="/"}break;case 123*E:d[k++]=r.strlen(g)*T;case 125*E:case 59:case 0:switch(q){case 0:case 125:j=0;case 59+m:v>0&&r.strlen(g)-x&&r.append(v>32?n(g+";",o,l,x-1):n(r.replace(g," ","")+";",o,l,x-2),b);break;case 59:g+=";";default:if(r.append(O=t(g,i,l,k,m,u,d,A,C=[],M=[],x),f),123===q)if(0===m)s(g,i,O,O,C,f,x,d,M);else switch(h){case 100:case 109:case 115:s(e,O,O,o&&r.append(t(e,O,O,0,0,u,d,A,u,C=[],x),M),u,M,x,d,o?C:M);break;default:s(g,O,O,O,[""],M,0,d,M)}}k=m=v=0,E=T=1,A=g="",x=p;break;case 58:x=1+r.strlen(g),v=w;default:if(E<1)if(123==q)--E;else if(125==q&&0==E++&&125==a.prev())continue;switch(g+=r.from(q),q*E){case 38:T=m>0?1:(g+="\f",-1);break;case 44:d[k++]=(r.strlen(g)-1)*T,T=1;break;case 64:45===a.peek()&&(g+=a.delimit(a.next())),h=a.peek(),m=x=r.strlen(A=g+=a.identifier(a.caret())),q++;break;case 45:45===w&&2==r.strlen(g)&&(E=0)}}return f}function t(s,t,c,n,i,l,o,u,f,p,d){for(var b=i-1,k=0===i?l:[""],m=r.sizeof(k),x=0,h=0,v=0;x<n;++x)for(var w=0,E=r.substr(s,b+1,b=r.abs(h=o[x])),j=s;w<m;++w)(j=r.trim(h>0?k[w]+" "+E:r.replace(E,/&\f/g,k[w])))&&(f[v++]=j);return a.node(s,t,c,0===i?e.RULESET:u,f,p,d)}function c(s,t,c){return a.node(s,t,c,e.COMMENT,r.from(a.char()),r.substr(s,2,-2),0)}function n(s,t,c,n){return a.node(s,t,c,e.DECLARATION,r.substr(s,0,n),r.substr(s,n+1,-1),n)}exports.comment=c,exports.compile=function(e){return a.dealloc(s("",null,null,null,[""],e=a.alloc(e),0,[0],e))},exports.declaration=n,exports.parse=s,exports.ruleset=t;
//# sourceMappingURL=Parser.js.map
