{"version":3,"file":"computeStyles.js","sources":["../../../../../../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js"],"sourcesContent":["import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};"],"names":["unsetSides","top","right","bottom","left","mapToStyles","_ref2","_Object$assign2","popper","popperRect","placement","variation","offsets","position","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","x","_offsets$y","y","_ref3","hasX","hasOwnProperty","hasY","sideX","sideY","win","window","offsetParent","getOffsetParent","heightProp","widthProp","getWindow","getDocumentElement","getComputedStyle","end","visualViewport","height","width","_Object$assign","commonStyles","Object","assign","_ref4","_ref","dpr","devicePixelRatio","round","roundOffsetsByDPR","transform","computeStyles$1","name","enabled","phase","fn","_ref5","state","options","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","process","env","NODE_ENV","transitionProperty","elements","some","property","indexOf","console","warn","join","getBasePlacement","getVariation","rects","strategy","modifiersData","popperOffsets","styles","arrow","attributes","data"],"mappings":"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"}