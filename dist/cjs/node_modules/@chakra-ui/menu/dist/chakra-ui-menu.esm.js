"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../system/dist/chakra-ui-system.esm.js"),t=require("../../utils/dist/chakra-ui-utils.esm.js");require("../../../react/index.js");var n=require("../../clickable/dist/chakra-ui-clickable.esm.js"),r=require("../../descendant/dist/chakra-ui-descendant.esm.js"),a=require("../../hooks/dist/chakra-ui-hooks.esm.js"),o=require("../../react-utils/dist/chakra-ui-react-utils.esm.js"),s=require("../../../framer-motion/dist/es/render/dom/motion.mjs.js"),i=require("../../../../_virtual/index.js");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var u=["onMouseEnter","onMouseMove","onMouseLeave","onClick","isDisabled","isFocusable","closeOnSelect","type"],m=["type","isChecked"],p=r.createDescendantContext(),d=p[1],f=p[3],v=o.createContext({strict:!1,name:"MenuContext"})[1];function x(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=v(),a=r.onToggle,s=r.popper,l=r.openAndFocusFirstItem,u=r.openAndFocusLastItem,m=i.react.exports.useCallback((function(e){var n=t.normalizeEventKey(e),r={Enter:l,ArrowDown:l,ArrowUp:u}[n];r&&(e.preventDefault(),e.stopPropagation(),r(e))}),[l,u]);return c({},e,{ref:o.mergeRefs(r.buttonRef,n,s.referenceRef),id:r.buttonId,"data-active":t.dataAttr(r.isOpen),"aria-expanded":r.isOpen,"aria-haspopup":"menu","aria-controls":r.menuId,onClick:t.callAllHandlers(e.onClick,a),onKeyDown:t.callAllHandlers(e.onKeyDown,m)})}function _(e){var n;return t.isHTMLElement(e)&&!(null==(n=e.getAttribute("role"))||!n.startsWith("menuitem"))}function h(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=v();if(!r)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");var s=r.focusedIndex,l=r.setFocusedIndex,u=r.menuRef,m=r.isOpen,p=r.onClose,f=r.menuId,x=r.isLazy,h=r.lazyBehavior,y=r.unstable__animationState,E=d(),k=a.useShortcut({preventDefault:function(e){return" "!==e.key&&_(e.target)}}),b=i.react.exports.useCallback((function(e){var n=t.normalizeEventKey(e),r={Tab:function(e){return e.preventDefault()},Escape:p,ArrowDown:function(){var e=E.nextEnabled(s);e&&l(e.index)},ArrowUp:function(){var e=E.prevEnabled(s);e&&l(e.index)}},a=r[n];if(a)return e.preventDefault(),void a(e);var o=k((function(e){var n=t.getNextItemFromSearch(E.values(),e,(function(e){var t,n;return null!=(t=null==e||null==(n=e.node)?void 0:n.textContent)?t:""}),E.item(s));if(n){var r=E.indexOf(n.node);l(r)}}));_(e.target)&&o(e)}),[E,s,k,p,l]),M=i.react.exports.useRef(!1);m&&(M.current=!0);var g=t.determineLazyBehavior({hasBeenSelected:M.current,isLazy:x,lazyBehavior:h,isSelected:y.present});return c({},e,{ref:o.mergeRefs(u,n),children:g?e.children:null,tabIndex:-1,role:"menu",id:f,style:c({},e.style,{transformOrigin:"var(--popper-transform-origin)"}),"aria-orientation":"vertical",onKeyDown:t.callAllHandlers(e.onKeyDown,b)})}function y(e){void 0===e&&(e={});var t=v(),n=t.popper,r=t.isOpen;return n.getPopperProps(c({},e,{style:c({visibility:r?"visible":"hidden"},e.style)}))}function E(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var s=e,m=s.onMouseEnter,p=s.onMouseMove,d=s.onMouseLeave,x=s.onClick,h=s.isDisabled,y=s.isFocusable,E=s.closeOnSelect,k=s.type,b=l(s,u),M=v(),g=M.setFocusedIndex,C=M.focusedIndex,I=M.closeOnSelect,w=M.onClose,N=M.menuRef,D=M.isOpen,S=M.menuId,O=i.react.exports.useRef(null),A=S+"-menuitem-"+a.useId(),R=f({disabled:h&&!y}),j=R.index,z=R.register,L=i.react.exports.useCallback((function(e){null==m||m(e),h||g(j)}),[g,j,h,m]),q=i.react.exports.useCallback((function(e){null==p||p(e),O.current&&!t.isActiveElement(O.current)&&L(e)}),[L,p]),F=i.react.exports.useCallback((function(e){null==d||d(e),h||g(-1)}),[g,h,d]),B=i.react.exports.useCallback((function(e){null==x||x(e),_(e.currentTarget)&&(null!=E?E:I)&&w()}),[w,x,I,E]),P=j===C,T=h&&!y;a.useUpdateEffect((function(){D&&(P&&!T&&O.current?t.focus(O.current,{nextTick:!0,selectTextIfInput:!1,preventScroll:!1}):N.current&&!t.isActiveElement(N.current)&&t.focus(N.current,{preventScroll:!1}))}),[P,T,N,D]);var V=n.useClickable({onClick:B,onMouseEnter:L,onMouseMove:q,onMouseLeave:F,ref:o.mergeRefs(z,O,r),isDisabled:h,isFocusable:y});return c({},b,V,{type:null!=k?k:V.type,id:A,role:"menuitem",tabIndex:P?0:-1})}function k(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var n=e,r=n.type,a=void 0===r?"radio":r,o=n.isChecked;return c({},E(l(n,m),t),{role:"menuitem"+a,"aria-checked":o})}var b=["children","as"],M=["rootProps"],g=["type"],C=["icon","iconSpacing","command","commandSpacing","children"],I=["icon","iconSpacing"],w=["title","children","className"],N=["className","children"],D=e.createStylesContext("Menu")[1],S=e.forwardRef((function(t,n){var r=D();return i.react.exports.createElement(e.chakra.button,c({ref:n},t,{__css:c({display:"inline-flex",appearance:"none",alignItems:"center",outline:0},r.button)}))})),O=e.forwardRef((function(n,r){n.children;var a=n.as,o=x(l(n,b),r),s=a||S;return i.react.exports.createElement(s,c({},o,{className:t.cx("chakra-menu__menu-button",n.className)}),i.react.exports.createElement(e.chakra.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0}},n.children))}));t.__DEV__&&(O.displayName="MenuButton");var A={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}};var R,j,z=(R=e.chakra.div,"custom"in(j=s.motion)&&"function"==typeof j.custom?j.custom(R):j(R)),L=e.forwardRef((function(n,r){var a,o,s=n.rootProps,u=l(n,M),m=v(),p=m.isOpen,d=m.onTransitionEnd,f=m.unstable__animationState,x=h(u,r),_=y(s),E=D();return i.react.exports.createElement(e.chakra.div,c({},_,{__css:{zIndex:null!=(a=n.zIndex)?a:null==(o=E.list)?void 0:o.zIndex}}),i.react.exports.createElement(z,c({},x,{onUpdate:d,onAnimationComplete:t.callAll(f.onComplete,x.onAnimationComplete),className:t.cx("chakra-menu__menu-list",x.className),variants:A,initial:!1,animate:p?"enter":"exit",__css:c({outline:0},E.list)})))}));t.__DEV__&&(L.displayName="MenuList");var q=e.forwardRef((function(t,n){var r=t.type,a=l(t,g),o=D(),s=a.as||r?null!=r?r:void 0:"button",u=i.react.exports.useMemo((function(){return c({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},o.item)}),[o.item]);return i.react.exports.createElement(e.chakra.button,c({ref:n,type:s},a,{__css:u}))})),F=e.forwardRef((function(e,n){var r=e.icon,a=e.iconSpacing,o=void 0===a?"0.75rem":a,s=e.command,u=e.commandSpacing,m=void 0===u?"0.75rem":u,p=e.children,d=E(l(e,C),n),f=r||s?i.react.exports.createElement("span",{style:{pointerEvents:"none",flex:1}},p):p;return i.react.exports.createElement(q,c({},d,{className:t.cx("chakra-menu__menuitem",d.className)}),r&&i.react.exports.createElement(K,{fontSize:"0.8em",marginEnd:o},r),f,s&&i.react.exports.createElement(V,{marginStart:m},s))}));t.__DEV__&&(F.displayName="MenuItem");var B=function(e){return i.react.exports.createElement("svg",c({viewBox:"0 0 14 14",width:"1em",height:"1em"},e),i.react.exports.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))},P=e.forwardRef((function(e,n){var r=e.icon,a=e.iconSpacing,o=void 0===a?"0.75rem":a,s=l(e,I),u=k(s,n);return i.react.exports.createElement(q,c({},u,{className:t.cx("chakra-menu__menuitem-option",s.className)}),null!==r&&i.react.exports.createElement(K,{fontSize:"0.8em",marginEnd:o,opacity:e.isChecked?1:0},r||i.react.exports.createElement(B,null)),i.react.exports.createElement("span",{style:{flex:1}},u.children))}));P.id="MenuItemOption",t.__DEV__&&(P.displayName="MenuItemOption");var T=e.forwardRef((function(n,r){var a=n.title,o=n.children,s=n.className,u=l(n,w),m=t.cx("chakra-menu__group__title",s),p=D();return i.react.exports.createElement("div",{ref:r,className:"chakra-menu__group",role:"group"},a&&i.react.exports.createElement(e.chakra.p,c({className:m},u,{__css:p.groupTitle}),a),o)}));t.__DEV__&&(T.displayName="MenuGroup");var V=e.forwardRef((function(t,n){var r=D();return i.react.exports.createElement(e.chakra.span,c({ref:n},t,{__css:r.command,className:"chakra-menu__command"}))}));t.__DEV__&&(V.displayName="MenuCommand");var K=function(n){var r=n.className,a=n.children,o=l(n,N),s=i.react.exports.Children.only(a),u=i.react.exports.isValidElement(s)?i.react.exports.cloneElement(s,{focusable:"false","aria-hidden":!0,className:t.cx("chakra-menu__icon",s.props.className)}):null,m=t.cx("chakra-menu__icon-wrapper",r);return i.react.exports.createElement(e.chakra.span,c({className:m},o,{__css:{flexShrink:0}}),u)};t.__DEV__&&(K.displayName="MenuIcon"),exports.MenuButton=O,exports.MenuCommand=V,exports.MenuGroup=T,exports.MenuIcon=K,exports.MenuItem=F,exports.MenuItemOption=P,exports.MenuList=L,exports.useMenuButton=x,exports.useMenuContext=v,exports.useMenuDescendant=f,exports.useMenuDescendantsContext=d,exports.useMenuItem=E,exports.useMenuList=h,exports.useMenuOption=k,exports.useMenuPositioner=y;
//# sourceMappingURL=chakra-ui-menu.esm.js.map
