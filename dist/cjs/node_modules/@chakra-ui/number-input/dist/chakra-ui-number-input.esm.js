"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../form-control/dist/chakra-ui-form-control.esm.js"),r=require("../../system/dist/chakra-ui-system.esm.js"),t=require("../../utils/dist/chakra-ui-utils.esm.js"),n=require("../../react-utils/dist/chakra-ui-react-utils.esm.js");require("../../../react/index.js");var a=require("../../icon/dist/chakra-ui-icon.esm.js"),u=require("../../counter/dist/chakra-ui-counter.esm.js"),o=require("../../hooks/dist/chakra-ui-hooks.esm.js"),l=require("../../hooks/dist/use-animation-state-5054a9f7.esm.js"),i=require("../../../../_virtual/index.js");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,a={},u=Object.keys(e);for(n=0;n<u.length;n++)t=u[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}var p=function(e){return i.react.exports.createElement(a.Icon,s({viewBox:"0 0 24 24"},e),i.react.exports.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"}))},d=function(e){return i.react.exports.createElement(a.Icon,s({viewBox:"0 0 24 24"},e),i.react.exports.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}))};function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function m(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return f(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,r,n,a){i.react.exports.useEffect((function(){if(e.current&&a){var u=t.getOwnerWindow(e.current),o=Array.isArray(r)?r:[r],l=new u.MutationObserver((function(e){for(var r,t=m(e);!(r=t()).done;){var a=r.value;"attributes"===a.type&&a.attributeName&&o.includes(a.attributeName)&&n(a)}}));return l.observe(e.current,{attributes:!0,attributeFilter:o}),function(){return l.disconnect()}}}))}var b=["focusInputOnChange","clampValueOnBlur","keepWithinRange","min","max","step","isReadOnly","isDisabled","isRequired","isInvalid","pattern","inputMode","allowMouseWheel","id","onChange","precision","name","aria-describedby","aria-label","aria-labelledby","onFocus","onBlur","onInvalid","getAriaValueText","isValidCharacter","format","parse"],x=/^[Ee0-9+\-.]$/;function y(e){return x.test(e)}function g(e){void 0===e&&(e={});var r=e,a=r.focusInputOnChange,p=void 0===a||a,d=r.clampValueOnBlur,f=void 0===d||d,m=r.keepWithinRange,x=void 0===m||m,g=r.min,h=void 0===g?t.minSafeInteger:g,C=r.max,k=void 0===C?t.maxSafeInteger:C,N=r.step,A=void 0===N?1:N,I=r.isReadOnly,_=r.isDisabled,w=r.isRequired,E=r.isInvalid,S=r.pattern,D=void 0===S?"[0-9]*(.[0-9]+)?":S,O=r.inputMode,P=void 0===O?"decimal":O,R=r.allowMouseWheel,j=r.id;r.onChange,r.precision;var M=r.name,q=r["aria-describedby"],T=r["aria-label"],B=r["aria-labelledby"],H=r.onFocus,V=r.onBlur,F=r.onInvalid,K=r.getAriaValueText,U=r.isValidCharacter,z=r.format,L=r.parse,W=c(r,b),$=l.u(H),G=l.u(V),Y=l.u(F),J=l.u(null!=U?U:y),Q=l.u(K),X=u.useCounter(e),Z=X.update,ee=X.increment,re=X.decrement,te=o.useBoolean(),ne=te[0],ae=te[1],ue=!(I||_),oe=i.react.exports.useRef(null),le=i.react.exports.useRef(null),ie=i.react.exports.useRef(null),se=i.react.exports.useRef(null),ce=i.react.exports.useCallback((function(e){return e.split("").filter(J).join("")}),[J]),pe=i.react.exports.useCallback((function(e){var r;return null!=(r=null==L?void 0:L(e))?r:e}),[L]),de=i.react.exports.useCallback((function(e){var r;return(null!=(r=null==z?void 0:z(e))?r:e).toString()}),[z]);o.useUpdateEffect((function(){(X.valueAsNumber>k||X.valueAsNumber<h)&&(null==Y||Y("rangeOverflow",de(X.value),X.valueAsNumber))}),[X.valueAsNumber,X.value,de,Y]),l.a((function(){if(oe.current&&oe.current.value!=X.value){var e=pe(oe.current.value);X.setValue(ce(e))}}),[pe,ce]);var fe=i.react.exports.useCallback((function(e){void 0===e&&(e=A),ue&&ee(e)}),[ee,ue,A]),me=i.react.exports.useCallback((function(e){void 0===e&&(e=A),ue&&re(e)}),[re,ue,A]),ve=function(e,r){var t=i.react.exports.useState(!1),n=t[0],a=t[1],u=i.react.exports.useState(null),l=u[0],s=u[1],c=i.react.exports.useState(!0),p=c[0],d=c[1],f=i.react.exports.useRef(null),m=function(){return clearTimeout(f.current)};o.useInterval((function(){"increment"===l&&e(),"decrement"===l&&r()}),n?50:null);var v=i.react.exports.useCallback((function(){p&&e(),f.current=setTimeout((function(){d(!1),a(!0),s("increment")}),300)}),[e,p]),b=i.react.exports.useCallback((function(){p&&r(),f.current=setTimeout((function(){d(!1),a(!0),s("decrement")}),300)}),[r,p]),x=i.react.exports.useCallback((function(){d(!0),a(!1),m()}),[]);return o.useUnmountEffect(m),{up:v,down:b,stop:x,isSpinning:n}}(fe,me);v(ie,"disabled",ve.stop,ve.isSpinning),v(se,"disabled",ve.stop,ve.isSpinning);var be=i.react.exports.useCallback((function(e){if(!e.nativeEvent.isComposing){var r=pe(e.currentTarget.value);Z(ce(r)),le.current={start:e.currentTarget.selectionStart,end:e.currentTarget.selectionEnd}}}),[Z,ce,pe]),xe=i.react.exports.useCallback((function(e){var r,t,n;null==$||$(e),le.current&&(e.target.selectionStart=null!=(r=le.current.start)?r:null==(t=e.currentTarget.value)?void 0:t.length,e.currentTarget.selectionEnd=null!=(n=le.current.end)?n:e.currentTarget.selectionStart)}),[$]),ye=i.react.exports.useCallback((function(e){if(!e.nativeEvent.isComposing){(function(e,r){if(null==e.key)return!0;var t=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!t)||r(e.key)})(e,J)||e.preventDefault();var r=ge(e)*A,n={ArrowUp:function(){return fe(r)},ArrowDown:function(){return me(r)},Home:function(){return Z(h)},End:function(){return Z(k)}}[t.normalizeEventKey(e)];n&&(e.preventDefault(),n(e))}}),[J,A,fe,me,Z,h,k]),ge=function(e){var r=1;return(e.metaKey||e.ctrlKey)&&(r=.1),e.shiftKey&&(r=10),r},he=i.react.exports.useMemo((function(){var e=null==Q?void 0:Q(X.value);if(!t.isNull(e))return e;var r=X.value.toString();return r||void 0}),[X.value,Q]),Ce=i.react.exports.useCallback((function(){var e=X.value;""!==e&&(X.valueAsNumber<h&&(e=h),X.valueAsNumber>k&&(e=k),X.cast(e))}),[X,k,h]),ke=i.react.exports.useCallback((function(){ae.off(),f&&Ce()}),[f,ae,Ce]),Ne=i.react.exports.useCallback((function(){p&&t.focus(oe.current,{nextTick:!0})}),[p]),Ae=i.react.exports.useCallback((function(e){e.preventDefault(),ve.up(),Ne()}),[Ne,ve]),Ie=i.react.exports.useCallback((function(e){e.preventDefault(),ve.down(),Ne()}),[Ne,ve]);l.b("wheel",(function(e){var r=t.getOwnerDocument(oe.current).activeElement===oe.current;if(R&&r){e.preventDefault();var n=ge(e)*A,a=Math.sign(e.deltaY);-1===a?fe(n):1===a&&me(n)}}),oe.current,{passive:!1});var _e=i.react.exports.useCallback((function(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var a=_||x&&X.isAtMax;return s({},e,{ref:n.mergeRefs(r,ie),role:"button",tabIndex:-1,onPointerDown:t.callAllHandlers(e.onPointerDown,(function(e){a||Ae(e)})),onPointerLeave:t.callAllHandlers(e.onPointerLeave,ve.stop),onPointerUp:t.callAllHandlers(e.onPointerUp,ve.stop),disabled:a,"aria-disabled":t.ariaAttr(a)})}),[X.isAtMax,x,Ae,ve.stop,_]),we=i.react.exports.useCallback((function(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var a=_||x&&X.isAtMin;return s({},e,{ref:n.mergeRefs(r,se),role:"button",tabIndex:-1,onPointerDown:t.callAllHandlers(e.onPointerDown,(function(e){a||Ie(e)})),onPointerLeave:t.callAllHandlers(e.onPointerLeave,ve.stop),onPointerUp:t.callAllHandlers(e.onPointerUp,ve.stop),disabled:a,"aria-disabled":t.ariaAttr(a)})}),[X.isAtMin,x,Ie,ve.stop,_]),Ee=i.react.exports.useCallback((function(e,r){var a,u,o,l;return void 0===e&&(e={}),void 0===r&&(r=null),s({name:M,inputMode:P,type:"text",pattern:D,"aria-labelledby":B,"aria-label":T,"aria-describedby":q,id:j,disabled:_},e,{readOnly:null!=(a=e.readOnly)?a:I,"aria-readonly":null!=(u=e.readOnly)?u:I,"aria-required":null!=(o=e.required)?o:w,required:null!=(l=e.required)?l:w,ref:n.mergeRefs(oe,r),value:de(X.value),role:"spinbutton","aria-valuemin":h,"aria-valuemax":k,"aria-valuenow":Number.isNaN(X.valueAsNumber)?void 0:X.valueAsNumber,"aria-invalid":t.ariaAttr(null!=E?E:X.isOutOfRange),"aria-valuetext":he,autoComplete:"off",autoCorrect:"off",onChange:t.callAllHandlers(e.onChange,be),onKeyDown:t.callAllHandlers(e.onKeyDown,ye),onFocus:t.callAllHandlers(e.onFocus,xe,ae.on),onBlur:t.callAllHandlers(e.onBlur,G,ke)})}),[M,P,D,B,T,de,q,j,_,w,I,E,X.value,X.valueAsNumber,X.isOutOfRange,h,k,he,be,ye,xe,ae.on,G,ke]);return{value:de(X.value),valueAsNumber:X.valueAsNumber,isFocused:ne,isDisabled:_,isReadOnly:I,getIncrementButtonProps:_e,getDecrementButtonProps:we,getInputProps:Ee,htmlProps:W}}var h=["htmlProps"],C=r.createStylesContext("NumberInput"),k=C[0],N=C[1],A=n.createContext({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),I=A[0],_=A[1],w=r.forwardRef((function(n,a){var u=r.useMultiStyleConfig("NumberInput",n),o=r.omitThemingProps(n),l=g(e.useFormControlProps(o)),p=l.htmlProps,d=c(l,h),f=i.react.exports.useMemo((function(){return d}),[d]);return i.react.exports.createElement(I,{value:f},i.react.exports.createElement(k,{value:u},i.react.exports.createElement(r.chakra.div,s({},p,{ref:a,className:t.cx("chakra-numberinput",n.className),__css:s({position:"relative",zIndex:0},u.root)}))))}));t.__DEV__&&(w.displayName="NumberInput");var E=r.forwardRef((function(e,t){var n=N();return i.react.exports.createElement(r.chakra.div,s({"aria-hidden":!0,ref:t},e,{__css:s({display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1},n.stepperGroup)}))}));t.__DEV__&&(E.displayName="NumberInputStepper");var S=r.forwardRef((function(e,n){var a=(0,_().getInputProps)(e,n),u=N();return i.react.exports.createElement(r.chakra.input,s({},a,{className:t.cx("chakra-numberinput__field",e.className),__css:s({width:"100%"},u.field)}))}));t.__DEV__&&(S.displayName="NumberInputField");var D=r.chakra("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),O=r.forwardRef((function(e,r){var t,n=N(),a=(0,_().getDecrementButtonProps)(e,r);return i.react.exports.createElement(D,s({},a,{__css:n.stepper}),null!=(t=e.children)?t:i.react.exports.createElement(p,null))}));t.__DEV__&&(O.displayName="NumberDecrementStepper");var P=r.forwardRef((function(e,r){var t,n=(0,_().getIncrementButtonProps)(e,r),a=N();return i.react.exports.createElement(D,s({},n,{__css:a.stepper}),null!=(t=e.children)?t:i.react.exports.createElement(d,null))}));t.__DEV__&&(P.displayName="NumberIncrementStepper"),exports.NumberDecrementStepper=O,exports.NumberIncrementStepper=P,exports.NumberInput=w,exports.NumberInputField=S,exports.NumberInputStepper=E,exports.StyledStepper=D,exports.useNumberInput=g;
//# sourceMappingURL=chakra-ui-number-input.esm.js.map
