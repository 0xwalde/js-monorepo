"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../system/dist/chakra-ui-system.esm.js"),e=require("../../utils/dist/chakra-ui-utils.esm.js");require("../../../react/index.js");var a=require("../../hooks/dist/use-animation-state-5054a9f7.esm.js"),t=require("../../../../_virtual/index.js");function n(){return n=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t])}return r},n.apply(this,arguments)}function i(r,e){if(null==r)return{};var a,t,n={},i=Object.keys(r);for(t=0;t<i.length;t++)a=i[t],e.indexOf(a)>=0||(n[a]=r[a]);return n}function o(r){var e=r.loading,n=r.src,i=r.srcSet,o=r.onLoad,l=r.onError,c=r.crossOrigin,s=r.sizes,u=r.ignoreFallback,f=t.react.exports.useState("pending"),d=f[0],g=f[1];t.react.exports.useEffect((function(){g(n?"loading":"pending")}),[n]);var m=t.react.exports.useRef(),h=t.react.exports.useCallback((function(){if(n){p();var r=new Image;r.src=n,c&&(r.crossOrigin=c),i&&(r.srcset=i),s&&(r.sizes=s),e&&(r.loading=e),r.onload=function(r){p(),g("loaded"),null==o||o(r)},r.onerror=function(r){p(),g("failed"),null==l||l(r)},m.current=r}}),[n,c,i,s,o,l,e]),p=function(){m.current&&(m.current.onload=null,m.current.onerror=null,m.current=null)};return a.a((function(){if(!u)return"loading"===d&&h(),function(){p()}}),[d,h,u]),u?"loaded":d}var l=function(r,e){return"loaded"!==r&&"beforeLoadOrError"===e||"failed"===r&&"onError"===e},c=["htmlWidth","htmlHeight","alt"],s=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"],u=t.react.exports.forwardRef((function(r,e){var a=r.htmlWidth,o=r.htmlHeight,l=r.alt,s=i(r,c);return t.react.exports.createElement("img",n({width:a,height:o,ref:e,alt:l},s))}));e.__DEV__&&(u.displayName="NativeImage");var f=r.forwardRef((function(a,c){var f=a.fallbackSrc,d=a.fallback,g=a.src,m=a.srcSet,h=a.align,p=a.fit,b=a.loading,k=a.ignoreFallback,v=a.crossOrigin,x=a.fallbackStrategy,y=void 0===x?"beforeLoadOrError":x,O=a.referrerPolicy,_=i(a,s),j=null!=b||k||!(void 0!==f||void 0!==d),E=o(n({},a,{ignoreFallback:j})),S=l(E,y),w=n({ref:c,objectFit:p,objectPosition:h},j?_:e.omit(_,["onError","onLoad"]));return S?d||t.react.exports.createElement(r.chakra.img,n({as:u,className:"chakra-image__placeholder",src:f},w)):t.react.exports.createElement(r.chakra.img,n({as:u,src:g,srcSet:m,crossOrigin:v,loading:b,referrerPolicy:O,className:"chakra-image"},w))}));e.__DEV__&&(f.displayName="Image"),exports.Image=f,exports.shouldShowFallbackImage=l,exports.useImage=o;
//# sourceMappingURL=chakra-ui-image.esm.js.map
