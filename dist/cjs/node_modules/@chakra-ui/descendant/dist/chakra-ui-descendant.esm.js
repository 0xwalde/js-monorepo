"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../react-utils/dist/chakra-ui-react-utils.esm.js");require("../../../react/index.js");var n=require("../../../../_virtual/index.js");function t(){return t=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},t.apply(this,arguments)}function r(e){return e.sort((function(e,n){var t=e.compareDocumentPosition(n);if(t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(t&Node.DOCUMENT_POSITION_PRECEDING||t&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(t&Node.DOCUMENT_POSITION_DISCONNECTED||t&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function i(e,n,t){var r=e+1;return t&&r>=n&&(r=0),r}function s(e,n,t){var r=e-1;return t&&r<0&&(r=n),r}var u="undefined"!=typeof window?n.react.exports.useLayoutEffect:n.react.exports.useEffect,a=function(){var e=this;this.descendants=new Map,this.register=function(n){var t;if(null!=n)return"object"==typeof(t=n)&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE?e.registerNode(n):function(t){e.registerNode(t,n)}},this.unregister=function(n){e.descendants.delete(n);var t=r(Array.from(e.descendants.keys()));e.assignIndex(t)},this.destroy=function(){e.descendants.clear()},this.assignIndex=function(n){e.descendants.forEach((function(e){var t=n.indexOf(e.node);e.index=t,e.node.dataset.index=e.index.toString()}))},this.count=function(){return e.descendants.size},this.enabledCount=function(){return e.enabledValues().length},this.values=function(){return Array.from(e.descendants.values()).sort((function(e,n){return e.index-n.index}))},this.enabledValues=function(){return e.values().filter((function(e){return!e.disabled}))},this.item=function(n){if(0!==e.count())return e.values()[n]},this.enabledItem=function(n){if(0!==e.enabledCount())return e.enabledValues()[n]},this.first=function(){return e.item(0)},this.firstEnabled=function(){return e.enabledItem(0)},this.last=function(){return e.item(e.descendants.size-1)},this.lastEnabled=function(){var n=e.enabledValues().length-1;return e.enabledItem(n)},this.indexOf=function(n){var t,r;return n&&null!=(t=null==(r=e.descendants.get(n))?void 0:r.index)?t:-1},this.enabledIndexOf=function(n){return null==n?-1:e.enabledValues().findIndex((function(e){return e.node.isSameNode(n)}))},this.next=function(n,t){void 0===t&&(t=!0);var r=i(n,e.count(),t);return e.item(r)},this.nextEnabled=function(n,t){void 0===t&&(t=!0);var r=e.item(n);if(r){var s=i(e.enabledIndexOf(r.node),e.enabledCount(),t);return e.enabledItem(s)}},this.prev=function(n,t){void 0===t&&(t=!0);var r=s(n,e.count()-1,t);return e.item(r)},this.prevEnabled=function(n,t){void 0===t&&(t=!0);var r=e.item(n);if(r){var i=s(e.enabledIndexOf(r.node),e.enabledCount()-1,t);return e.enabledItem(i)}},this.registerNode=function(n,i){if(n&&!e.descendants.has(n)){var s=r(Array.from(e.descendants.keys()).concat(n));null!=i&&i.disabled&&(i.disabled=!!i.disabled);var u=t({node:n,index:-1},i);e.descendants.set(n,u),e.assignIndex(s)}}};var d=e.createContext({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),o=d[0],c=d[1];function f(){return[o,function(){return c()},function(){return e=n.react.exports.useRef(new a),u((function(){return function(){return e.current.destroy()}})),e.current;var e},function(t){return function(t){var r=c(),i=n.react.exports.useState(-1),s=i[0],a=i[1],d=n.react.exports.useRef(null);u((function(){return function(){d.current&&r.unregister(d.current)}}),[]),u((function(){if(d.current){var e=Number(d.current.dataset.index);s==e||Number.isNaN(e)||a(e)}}));var o=t?r.register(t):r.register;return{descendants:r,index:s,enabledIndex:r.enabledIndexOf(d.current),register:e.mergeRefs(o,d)}}(t)}]}exports.createDescendantContext=f,exports.default=f;
//# sourceMappingURL=chakra-ui-descendant.esm.js.map
