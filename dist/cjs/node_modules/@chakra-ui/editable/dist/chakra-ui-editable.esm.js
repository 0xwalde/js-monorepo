"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../system/dist/chakra-ui-system.esm.js"),t=require("../../utils/dist/chakra-ui-utils.esm.js"),a=require("../../react-utils/dist/chakra-ui-react-utils.esm.js");require("../../../react/index.js");var r=require("../../hooks/dist/chakra-ui-hooks.esm.js"),l=require("../../hooks/dist/use-animation-state-5054a9f7.esm.js"),n=require("../../../../_virtual/index.js");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}var o=["onChange","onCancel","onSubmit","value","isDisabled","defaultValue","startWithEditView","isPreviewFocusable","submitOnBlur","selectAllOnFocus","placeholder","onEdit"];function c(e){void 0===e&&(e={});var c=e,u=c.onChange,d=c.onCancel,p=c.onSubmit,f=c.value,b=c.isDisabled,v=c.defaultValue,x=c.startWithEditView,m=c.isPreviewFocusable,h=void 0===m||m,E=c.submitOnBlur,C=void 0===E||E,g=c.selectAllOnFocus,k=void 0===g||g,_=c.placeholder,y=c.onEdit,P=i(c,o),w=Boolean(x&&!b),A=n.react.exports.useState(w),R=A[0],D=A[1],S=r.useControllableState({defaultValue:v||"",value:f,onChange:u}),j=S[0],F=S[1],H=n.react.exports.useState(j),N=H[0],O=H[1],B=n.react.exports.useRef(null),I=n.react.exports.useRef(null),V=n.react.exports.useRef(null),T=n.react.exports.useRef(null),K=n.react.exports.useRef(null);r.useFocusOnPointerDown({ref:B,enabled:R,elements:[T,K]});var q=!R&&!b;l.a((function(){R&&t.focus(B.current,{selectTextIfInput:k})}),[]),r.useUpdateEffect((function(){R?(t.focus(B.current,{selectTextIfInput:k}),null==y||y()):t.focus(V.current)}),[R,y,k]);var z=n.react.exports.useCallback((function(){q&&D(!0)}),[q]),M=n.react.exports.useCallback((function(){O(j)}),[j]),W=n.react.exports.useCallback((function(){D(!1),F(N),null==d||d(N)}),[d,F,N]),U=n.react.exports.useCallback((function(){D(!1),O(j),null==p||p(j)}),[j,p]),G=n.react.exports.useCallback((function(e){F(e.currentTarget.value)}),[F]),J=n.react.exports.useCallback((function(e){var a=t.normalizeEventKey(e),r={Escape:W,Enter:function(e){e.shiftKey||e.metaKey||U()}},l=r[a];l&&(e.preventDefault(),l(e))}),[W,U]),L=n.react.exports.useCallback((function(e){var a=t.normalizeEventKey(e),r={Escape:W}[a];r&&(e.preventDefault(),r(e))}),[W]),Q=t.isEmpty(j),X=n.react.exports.useCallback((function(e){var a=t.getRelatedTarget(e),r=t.contains(T.current,a),l=t.contains(K.current,a);!r&&!l&&(C?U():W())}),[C,U,W]),Y=n.react.exports.useCallback((function(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var l=q&&h?0:void 0;return s({},e,{ref:a.mergeRefs(r,I),children:Q?_:j,hidden:R,"aria-disabled":t.ariaAttr(b),tabIndex:l,onFocus:t.callAllHandlers(e.onFocus,z,M)})}),[b,R,q,h,Q,z,M,_,j]),Z=n.react.exports.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),s({},e,{hidden:!R,placeholder:_,ref:a.mergeRefs(r,B),disabled:b,"aria-disabled":t.ariaAttr(b),value:j,onBlur:t.callAllHandlers(e.onBlur,X),onChange:t.callAllHandlers(e.onChange,G),onKeyDown:t.callAllHandlers(e.onKeyDown,J),onFocus:t.callAllHandlers(e.onFocus,M)})}),[b,R,X,G,J,M,_,j]),$=n.react.exports.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),s({},e,{hidden:!R,placeholder:_,ref:a.mergeRefs(r,B),disabled:b,"aria-disabled":t.ariaAttr(b),value:j,onBlur:t.callAllHandlers(e.onBlur,X),onChange:t.callAllHandlers(e.onChange,G),onKeyDown:t.callAllHandlers(e.onKeyDown,L),onFocus:t.callAllHandlers(e.onFocus,M)})}),[b,R,X,G,L,M,_,j]),ee=n.react.exports.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),s({"aria-label":"Edit"},e,{type:"button",onClick:t.callAllHandlers(e.onClick,z),ref:a.mergeRefs(r,V),disabled:b})}),[z,b]),te=n.react.exports.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),s({},e,{"aria-label":"Submit",ref:a.mergeRefs(K,r),type:"button",onClick:t.callAllHandlers(e.onClick,U),disabled:b})}),[U,b]),ae=n.react.exports.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),s({"aria-label":"Cancel",id:"cancel"},e,{ref:a.mergeRefs(T,r),type:"button",onClick:t.callAllHandlers(e.onClick,W),disabled:b})}),[W,b]);return{isEditing:R,isDisabled:b,isValueEmpty:Q,value:j,onEdit:z,onCancel:W,onSubmit:U,getPreviewProps:Y,getInputProps:Z,getTextareaProps:$,getEditButtonProps:ee,getSubmitButtonProps:te,getCancelButtonProps:ae,htmlProps:P}}var u=["htmlProps"],d=e.createStylesContext("Editable"),p=d[0],f=d[1],b=a.createContext({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),v=b[0],x=b[1],m=e.forwardRef((function(a,r){var l=e.useMultiStyleConfig("Editable",a),o=c(e.omitThemingProps(a)),d=o.htmlProps,f=i(o,u),b=f.isEditing,x=f.onSubmit,m=f.onCancel,h=f.onEdit,E=t.cx("chakra-editable",a.className),C=t.runIfFn(a.children,{isEditing:b,onSubmit:x,onCancel:m,onEdit:h});return n.react.exports.createElement(v,{value:f},n.react.exports.createElement(p,{value:l},n.react.exports.createElement(e.chakra.div,s({ref:r},d,{className:E}),C)))}));t.__DEV__&&(m.displayName="Editable");var h={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent"},E=e.forwardRef((function(a,r){var l=x().getPreviewProps,i=f(),o=l(a,r),c=t.cx("chakra-editable__preview",a.className);return n.react.exports.createElement(e.chakra.span,s({},o,{__css:s({cursor:"text",display:"inline-block"},h,i.preview),className:c}))}));t.__DEV__&&(E.displayName="EditablePreview");var C=e.forwardRef((function(a,r){var l=x().getInputProps,i=f(),o=l(a,r),c=t.cx("chakra-editable__input",a.className);return n.react.exports.createElement(e.chakra.input,s({},o,{__css:s({outline:0},h,i.input),className:c}))}));t.__DEV__&&(C.displayName="EditableInput");var g=e.forwardRef((function(a,r){var l=x().getTextareaProps,i=f(),o=l(a,r),c=t.cx("chakra-editable__textarea",a.className);return n.react.exports.createElement(e.chakra.textarea,s({},o,{__css:s({outline:0},h,i.textarea),className:c}))}));t.__DEV__&&(g.displayName="EditableTextarea"),exports.Editable=m,exports.EditableInput=C,exports.EditablePreview=E,exports.EditableTextarea=g,exports.useEditable=c;
//# sourceMappingURL=chakra-ui-editable.esm.js.map
