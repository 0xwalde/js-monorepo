"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../tslib/tslib.es6.js"),t=require("./utils/detect-animation-from-options.mjs.js"),o=require("../../../node_modules/framesync/dist/es/index.mjs.js"),a=require("../utils/interpolate.mjs.js"),r=require("./utils/elapsed.mjs.js");const s=e=>{const t=({delta:t})=>e(t);return{start:()=>o.default.update(t,!0),stop:()=>o.cancelSync.update(t)}};exports.animate=function(o){var n,l,{from:p,autoplay:i=!0,driver:u=s,elapsed:d=0,repeat:c=0,repeatType:m="loop",repeatDelay:j=0,onPlay:y,onStop:f,onComplete:v,onRepeat:b,onUpdate:q}=o,x=e.__rest(o,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let _,O,g,{to:D}=x,E=0,P=x.duration,R=!1,S=!0;const T=t.detectAnimationFromOptions(x);(null===(l=(n=T).needsInterpolation)||void 0===l?void 0:l.call(n,p,D))&&(g=a.interpolate([0,100],[p,D],{clamp:!1}),p=0,D=100);const h=T(Object.assign(Object.assign({},x),{from:p,to:D}));function C(e){if(S||(e=-e),d+=e,!R){const e=h.next(Math.max(0,d));O=e.value,g&&(O=g(O)),R=S?e.done:d<=0}null==q||q(O),R&&(0===E&&(null!=P||(P=d)),E<c?r.hasRepeatDelayElapsed(d,P,j,S)&&(E++,"reverse"===m?(S=E%2==0,d=r.reverseElapsed(d,P,j,S)):(d=r.loopElapsed(d,P,j),"mirror"===m&&h.flipTarget()),R=!1,b&&b()):(_.stop(),v&&v()))}return i&&(null==y||y(),_=u(C),_.start()),{stop:()=>{null==f||f(),_.stop()}}};
//# sourceMappingURL=index.mjs.js.map
