{"version":3,"file":"mix-complex.mjs.js","sources":["../../../../../../../node_modules/popmotion/dist/es/utils/mix-complex.mjs"],"sourcesContent":["import { complex, color } from 'style-value-types';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { isNum } from './inc.mjs';\nimport { pipe } from './pipe.mjs';\nimport { warning } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n    if (isNum(origin)) {\n        return (v) => mix(origin, target, v);\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return mixComplex(origin, target);\n    }\n}\nconst mixArray = (from, to) => {\n    const output = [...from];\n    const numValues = output.length;\n    const blendValue = from.map((fromThis, i) => getMixer(fromThis, to[i]));\n    return (v) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nconst mixObject = (origin, target) => {\n    const output = Object.assign(Object.assign({}, origin), target);\n    const blendValue = {};\n    for (const key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\nfunction analyse(value) {\n    const parsed = complex.parse(value);\n    const numValues = parsed.length;\n    let numNumbers = 0;\n    let numRGB = 0;\n    let numHSL = 0;\n    for (let i = 0; i < numValues; i++) {\n        if (numNumbers || typeof parsed[i] === \"number\") {\n            numNumbers++;\n        }\n        else {\n            if (parsed[i].hue !== undefined) {\n                numHSL++;\n            }\n            else {\n                numRGB++;\n            }\n        }\n    }\n    return { parsed, numNumbers, numRGB, numHSL };\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyse(origin);\n    const targetStats = analyse(target);\n    const canInterpolate = originStats.numHSL === targetStats.numHSL &&\n        originStats.numRGB === targetStats.numRGB &&\n        originStats.numNumbers >= targetStats.numNumbers;\n    if (canInterpolate) {\n        return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return (p) => `${p > 0 ? target : origin}`;\n    }\n};\n\nexport { mixArray, mixComplex, mixObject };\n"],"names":["getMixer","origin","target","isNum","v","mix","color","test","mixColor","mixComplex","mixArray","from","to","output","numValues","length","blendValue","map","fromThis","i","analyse","value","parsed","complex","parse","numNumbers","numRGB","numHSL","undefined","hue","template","createTransformer","originStats","targetStats","pipe","warning","p","Object","assign","key"],"mappings":"+XAOA,SAASA,EAASC,EAAQC,GACtB,OAAIC,EAAAA,MAAMF,GACEG,GAAMC,EAAGA,IAACJ,EAAQC,EAAQE,GAE7BE,EAAKA,MAACC,KAAKN,GACTO,EAAQA,SAACP,EAAQC,GAGjBO,EAAWR,EAAQC,EAElC,CACK,MAACQ,EAAW,CAACC,EAAMC,KACpB,MAAMC,EAAS,IAAIF,GACbG,EAAYD,EAAOE,OACnBC,EAAaL,EAAKM,KAAI,CAACC,EAAUC,IAAMnB,EAASkB,EAAUN,EAAGO,MACnE,OAAQf,IACJ,IAAK,IAAIe,EAAI,EAAGA,EAAIL,EAAWK,IAC3BN,EAAOM,GAAKH,EAAWG,GAAGf,GAE9B,OAAOS,CAAM,CAChB,EAiBL,SAASO,EAAQC,GACb,MAAMC,EAASC,EAAAA,QAAQC,MAAMH,GACvBP,EAAYQ,EAAOP,OACzB,IAAIU,EAAa,EACbC,EAAS,EACTC,EAAS,EACb,IAAK,IAAIR,EAAI,EAAGA,EAAIL,EAAWK,IACvBM,GAAmC,iBAAdH,EAAOH,GAC5BM,SAGsBG,IAAlBN,EAAOH,GAAGU,IACVF,IAGAD,IAIZ,MAAO,CAAEJ,SAAQG,aAAYC,SAAQC,SACzC,CACK,MAAClB,EAAa,CAACR,EAAQC,KACxB,MAAM4B,EAAWP,EAAAA,QAAQQ,kBAAkB7B,GACrC8B,EAAcZ,EAAQnB,GACtBgC,EAAcb,EAAQlB,GAI5B,OAHuB8B,EAAYL,SAAWM,EAAYN,QACtDK,EAAYN,SAAWO,EAAYP,QACnCM,EAAYP,YAAcQ,EAAYR,WAE/BS,EAAIA,KAACxB,EAASsB,EAAYV,OAAQW,EAAYX,QAASQ,IAG9DK,WAAQ,EAAM,mBAAmBlC,WAAgBC,6KACzCkC,GAAM,GAAGA,EAAI,EAAIlC,EAASD,IACrC,4DAjDa,CAACA,EAAQC,KACvB,MAAMW,EAASwB,OAAOC,OAAOD,OAAOC,OAAO,GAAIrC,GAASC,GAClDc,EAAa,CAAA,EACnB,IAAK,MAAMuB,KAAO1B,OACMe,IAAhB3B,EAAOsC,SAAsCX,IAAhB1B,EAAOqC,KACpCvB,EAAWuB,GAAOvC,EAASC,EAAOsC,GAAMrC,EAAOqC,KAGvD,OAAQnC,IACJ,IAAK,MAAMmC,KAAOvB,EACdH,EAAO0B,GAAOvB,EAAWuB,GAAKnC,GAElC,OAAOS,CAAM,CAChB"}