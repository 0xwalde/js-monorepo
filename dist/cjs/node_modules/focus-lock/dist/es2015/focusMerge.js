"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./solver.js"),t=require("./utils/DOMutils.js"),r=require("./utils/all-affected.js"),u=require("./utils/firstFocus.js"),i=require("./utils/getActiveElement.js"),o=require("./utils/is.js"),n=require("./utils/parenting.js");exports.getFocusMerge=function(s,l){var a=document&&i.getActiveElement(),c=r.getAllAffectedNodes(s).filter(o.isNotAGuard),f=n.getTopCommonParent(a||s,s,c),d=new Map,b=t.getAllTabbableNodes(c,d),g=t.getTabbableNodes(c,d).filter((function(e){var t=e.node;return o.isNotAGuard(t)}));if(g[0]||(g=b)[0]){var p,v,A,F,m=t.getAllTabbableNodes([f],d).map((function(e){return e.node})),j=(p=m,v=g,A=new Map,v.forEach((function(e){return A.set(e.node,e)})),p.map((function(e){return A.get(e)})).filter(o.isDefined)),q=j.map((function(e){return e.node})),N=e.newFocus(q,m,a,l);if(N===e.NEW_FOCUS){var M=t.filterAutoFocusable(b.map((function(e){return e.node}))).filter((F=n.allParentAutofocusables(c,d),function(e){var t;return e.autofocus||!!(null===(t=o.getDataset(e))||void 0===t?void 0:t.autofocus)||F.indexOf(e)>=0}));return{node:M&&M.length?u.pickFirstFocus(M):u.pickFirstFocus(t.filterAutoFocusable(q))}}return void 0===N?N:j[N]}};
//# sourceMappingURL=focusMerge.js.map
