"use strict";var e=require("../../../@babel/runtime/helpers/esm/extends.js");require("../../../react/index.js"),require("../../../prop-types/index.js");var r=require("../../../focus-lock/dist/es2015/constants.js"),o=require("../../../use-callback-ref/dist/es2015/useMergeRef.js"),s=require("./FocusGuard.js"),t=require("./medium.js"),p=require("../../../../_virtual/index6.js"),c=require("../../../../_virtual/index.js"),a=[],n=c.react.exports.forwardRef((function(p,n){var u,i=c.react.exports.useState(),d=i[0],l=i[1],x=c.react.exports.useRef(),f=c.react.exports.useRef(!1),v=c.react.exports.useRef(null),y=p.children,b=p.disabled,T=p.noFocusGuards,m=p.persistentFocus,F=p.crossFrame,h=p.autoFocus,g=p.allowTextSelection,j=p.group,k=p.className,E=p.whiteList,O=p.hasPositiveIndices,q=p.shards,w=void 0===q?a:q,C=p.as,S=void 0===C?"div":C,P=p.lockProps,R=void 0===P?{}:P,D=p.sideCar,G=p.returnFocus,N=p.focusOptions,I=p.onActivation,L=p.onDeactivation,_=c.react.exports.useState({})[0],A=c.react.exports.useCallback((function(){v.current=v.current||document&&document.activeElement,x.current&&I&&I(x.current),f.current=!0}),[I]),M=c.react.exports.useCallback((function(){f.current=!1,L&&L(x.current)}),[L]);c.react.exports.useEffect((function(){b||(v.current=null)}),[]);var B=c.react.exports.useCallback((function(e){var r=v.current;if(r&&r.focus){var o="function"==typeof G?G(r):G;if(o){var s="object"==typeof o?o:void 0;v.current=null,e?Promise.resolve().then((function(){return r.focus(s)})):r.focus(s)}}}),[G]),U=c.react.exports.useCallback((function(e){f.current&&t.mediumFocus.useMedium(e)}),[]),V=t.mediumBlur.useMedium,z=c.react.exports.useCallback((function(e){x.current!==e&&(x.current=e,l(e))}),[]);"production"!==process.env.NODE_ENV&&(void 0!==g&&console.warn("React-Focus-Lock: allowTextSelection is deprecated and enabled by default"),c.react.exports.useEffect((function(){x.current||console.error("FocusLock: could not obtain ref to internal node")}),[]));var H=e(((u={})[r.FOCUS_DISABLED]=b&&"disabled",u[r.FOCUS_GROUP]=j,u),R),J=!0!==T,K=J&&"tail"!==T,Q=o.useMergeRefs([n,z]);return c.react.exports.createElement(c.react.exports.Fragment,null,J&&[c.react.exports.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:b?-1:0,style:s.hiddenGuard}),O?c.react.exports.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:b?-1:1,style:s.hiddenGuard}):null],!b&&c.react.exports.createElement(D,{id:_,sideCar:t.mediumSidecar,observed:d,disabled:b,persistentFocus:m,crossFrame:F,autoFocus:h,whiteList:E,shards:w,onActivation:A,onDeactivation:M,returnFocus:B,focusOptions:N}),c.react.exports.createElement(S,e({ref:Q},H,{className:k,onBlur:V,onFocus:U}),y),K&&c.react.exports.createElement("div",{"data-focus-guard":!0,tabIndex:b?-1:0,style:s.hiddenGuard}))}));n.propTypes="production"!==process.env.NODE_ENV?{children:p.propTypes.exports.node,disabled:p.propTypes.exports.bool,returnFocus:p.propTypes.exports.oneOfType([p.propTypes.exports.bool,p.propTypes.exports.object,p.propTypes.exports.func]),focusOptions:p.propTypes.exports.object,noFocusGuards:p.propTypes.exports.bool,hasPositiveIndices:p.propTypes.exports.bool,allowTextSelection:p.propTypes.exports.bool,autoFocus:p.propTypes.exports.bool,persistentFocus:p.propTypes.exports.bool,crossFrame:p.propTypes.exports.bool,group:p.propTypes.exports.string,className:p.propTypes.exports.string,whiteList:p.propTypes.exports.func,shards:p.propTypes.exports.arrayOf(p.propTypes.exports.any),as:p.propTypes.exports.oneOfType([p.propTypes.exports.string,p.propTypes.exports.func,p.propTypes.exports.object]),lockProps:p.propTypes.exports.object,onActivation:p.propTypes.exports.func,onDeactivation:p.propTypes.exports.func,sideCar:p.propTypes.exports.any.isRequired}:{},n.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0},module.exports=n;
//# sourceMappingURL=Lock.js.map
