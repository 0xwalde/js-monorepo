"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../../tslib/tslib.es6.js"),t=require("../../utils/time-conversion.mjs.js"),n=require("./easing.mjs.js"),i=require("./is-animatable.mjs.js"),r=require("./default-transitions.mjs.js"),o=require("../../../../../hey-listen/dist/hey-listen.es.js"),a=require("../../render/dom/value-types/animatable-none.mjs.js"),s=require("../../utils/use-instant-transition-state.mjs.js"),l=require("../../utils/resolve-value.mjs.js"),u=require("../../../../../popmotion/dist/es/animations/inertia.mjs.js"),p=require("../../../../../popmotion/dist/es/animations/index.mjs.js");function y(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var n=e.__rest(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(n).length}var d=!1;function c(i){var r=i.ease,a=i.times,s=i.yoyo,l=i.flip,u=i.loop,p=e.__rest(i,["ease","times","yoyo","flip","loop"]),y=e.__assign({},p);return a&&(y.offset=a),p.duration&&(y.duration=t.secondsToMilliseconds(p.duration)),p.repeatDelay&&(y.repeatDelay=t.secondsToMilliseconds(p.repeatDelay)),r&&(y.ease=n.isEasingArray(r)?r.map(n.easingDefinitionToFunction):n.easingDefinitionToFunction(r)),"tween"===p.type&&(y.type="keyframes"),(s||u||l)&&(o.warning(!d,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),d=!0,s?y.repeatType="reverse":u?y.repeatType="loop":l&&(y.repeatType="mirror"),y.repeat=u||s||l||p.repeat),"spring"!==p.type&&(y.type="keyframes"),y}function m(e,t){var n,i;return null!==(i=null!==(n=(j(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==i?i:0}function f(t){return Array.isArray(t.to)&&null===t.to[0]&&(t.to=e.__spreadArray([],e.__read(t.to),!1),t.to[0]=t.from),t}function g(t,n,i){var o;return Array.isArray(n.to)&&(null!==(o=t.duration)&&void 0!==o||(t.duration=.8)),f(n),y(t)||(t=e.__assign(e.__assign({},t),r.getDefaultTransition(i,n.to))),e.__assign(e.__assign({},n),c(t))}function v(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function _(e){return"number"==typeof e?0:a.getAnimatableNone("",e)}function j(e,t){return e[t]||e.default||e}exports.convertTransitionToAnimationOptions=c,exports.getDelayFromTransition=m,exports.getPopmotionAnimationOptions=g,exports.getValueTransition=j,exports.getZeroUnit=_,exports.hydrateKeyframes=f,exports.isTransitionDefined=y,exports.isZero=v,exports.startAnimation=function(n,r,y,d){return void 0===d&&(d={}),s.instantAnimationState.current&&(d={type:!1}),r.start((function(s){var c,f,T=function(t,n,r,s,y){var d,c=j(s,t),m=null!==(d=c.from)&&void 0!==d?d:n.get(),f=i.isAnimatable(t,r);"none"===m&&f&&"string"==typeof r?m=a.getAnimatableNone(t,r):v(m)&&"string"==typeof r?m=_(r):!Array.isArray(r)&&v(r)&&"string"==typeof m&&(r=_(m));var T=i.isAnimatable(t,m);return o.warning(T===f,"You are trying to animate ".concat(t,' from "').concat(m,'" to "').concat(r,'". ').concat(m," is not an animatable value - to enable this animation set ").concat(m," to a value animatable to ").concat(r," via the `style` property.")),T&&f&&!1!==c.type?function(){var i={from:m,to:r,velocity:n.getVelocity(),onComplete:y,onUpdate:function(e){return n.set(e)}};return"inertia"===c.type||"decay"===c.type?u.inertia(e.__assign(e.__assign({},i),c)):p.animate(e.__assign(e.__assign({},g(c,i,t)),{onUpdate:function(e){var t;i.onUpdate(e),null===(t=c.onUpdate)||void 0===t||t.call(c,e)},onComplete:function(){var e;i.onComplete(),null===(e=c.onComplete)||void 0===e||e.call(c)}}))}:function(){var e,t,i=l.resolveFinalValueInKeyframes(r);return n.set(i),y(),null===(e=null==c?void 0:c.onUpdate)||void 0===e||e.call(c,i),null===(t=null==c?void 0:c.onComplete)||void 0===t||t.call(c),{stop:function(){}}}}(n,r,y,d,s),A=m(d,n),b=function(){return f=T()};return A?c=window.setTimeout(b,t.secondsToMilliseconds(A)):b(),function(){clearTimeout(c),null==f||f.stop()}}))};
//# sourceMappingURL=transitions.mjs.js.map
