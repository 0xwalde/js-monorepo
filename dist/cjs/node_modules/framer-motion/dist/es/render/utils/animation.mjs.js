"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../../../../../tslib/tslib.es6.js"),i=require("../../animation/utils/transitions.mjs.js"),n=require("./setters.mjs.js"),t=require("./variants.mjs.js"),e=require("../html/utils/transform.mjs.js");function o(i,n,e){var u;void 0===e&&(e={});var v=t.resolveVariant(i,n,e.custom),l=(v||{}).transition,d=void 0===l?i.getDefaultTransition()||{}:l;e.transitionOverride&&(d=e.transitionOverride);var f=v?function(){return a(i,v,e)}:function(){return Promise.resolve()},m=(null===(u=i.variantChildren)||void 0===u?void 0:u.size)?function(t){void 0===t&&(t=0);var a=d.delayChildren,u=void 0===a?0:a,v=d.staggerChildren,l=d.staggerDirection;return function(i,n,t,e,a,u){void 0===t&&(t=0);void 0===e&&(e=0);void 0===a&&(a=1);var v=[],l=(i.variantChildren.size-1)*e,d=1===a?function(r){return void 0===r&&(r=0),r*e}:function(r){return void 0===r&&(r=0),l-r*e};return Array.from(i.variantChildren).sort(s).forEach((function(i,e){v.push(o(i,n,r.__assign(r.__assign({},u),{delay:t+d(e)})).then((function(){return i.notifyAnimationComplete(n)})))})),Promise.all(v)}(i,n,u+t,v,l,e)}:function(){return Promise.resolve()},c=d.when;if(c){var y=r.__read("beforeChildren"===c?[f,m]:[m,f],2),g=y[0],h=y[1];return g().then(h)}return Promise.all([f(),m(e.delay)])}function a(t,o,a){var s,v=void 0===a?{}:a,l=v.delay,d=void 0===l?0:l,f=v.transitionOverride,m=v.type,c=t.makeTargetAnimatable(o),y=c.transition,g=void 0===y?t.getDefaultTransition():y,h=c.transitionEnd,p=r.__rest(c,["transition","transitionEnd"]);f&&(g=f);var _=[],j=m&&(null===(s=t.animationState)||void 0===s?void 0:s.getState()[m]);for(var P in p){var A=t.getValue(P),C=p[P];if(!(!A||void 0===C||j&&u(j,P))){var O=r.__assign({delay:d},g);t.shouldReduceMotion&&e.isTransformProp(P)&&(O=r.__assign(r.__assign({},O),{type:!1,delay:0}));var T=i.startAnimation(P,A,C,O);_.push(T)}}return Promise.all(_).then((function(){h&&n.setTarget(t,h)}))}function s(r,i){return r.sortNodePosition(i)}function u(r,i){var n=r.protectedKeys,t=r.needsAnimating,e=n.hasOwnProperty(i)&&!0!==t[i];return t[i]=!1,e}exports.animateVisualElement=function(r,i,n){var e;if(void 0===n&&(n={}),r.notifyAnimationStart(i),Array.isArray(i)){var s=i.map((function(i){return o(r,i,n)}));e=Promise.all(s)}else if("string"==typeof i)e=o(r,i,n);else{var u="function"==typeof i?t.resolveVariant(r,i,n.custom):i;e=a(r,u,n)}return e.then((function(){return r.notifyAnimationComplete(i)}))},exports.sortByTreeOrder=s;
//# sourceMappingURL=animation.mjs.js.map
