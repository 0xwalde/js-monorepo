"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../node_modules/framesync/dist/es/index.mjs.js"),e=require("../utils/subscription-manager.mjs.js"),i=require("../../../../popmotion/dist/es/utils/velocity-per-second.mjs.js"),r=function(){function r(i){var r,s=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new e.SubscriptionManager,this.velocityUpdateSubscribers=new e.SubscriptionManager,this.renderSubscribers=new e.SubscriptionManager,this.canTrackVelocity=!1,this.updateAndNotify=function(e,i){void 0===i&&(i=!0),s.prev=s.current,s.current=e;var r=t.getFrameData(),n=r.delta,o=r.timestamp;s.lastUpdated!==o&&(s.timeDelta=n,s.lastUpdated=o,t.default.postRender(s.scheduleVelocityCheck)),s.prev!==s.current&&s.updateSubscribers.notify(s.current),s.velocityUpdateSubscribers.getSize()&&s.velocityUpdateSubscribers.notify(s.getVelocity()),i&&s.renderSubscribers.notify(s.current)},this.scheduleVelocityCheck=function(){return t.default.postRender(s.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==s.lastUpdated&&(s.prev=s.current,s.velocityUpdateSubscribers.notify(s.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=i,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r)))}return r.prototype.onChange=function(t){return this.updateSubscribers.add(t)},r.prototype.clearListeners=function(){this.updateSubscribers.clear()},r.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},r.prototype.attach=function(t){this.passiveEffect=t},r.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},r.prototype.get=function(){return this.current},r.prototype.getPrevious=function(){return this.prev},r.prototype.getVelocity=function(){return this.canTrackVelocity?i.velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},r.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(i){e.hasAnimated=!0,e.stopAnimation=t(i)})).then((function(){return e.clearAnimation()}))},r.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},r.prototype.isAnimating=function(){return!!this.stopAnimation},r.prototype.clearAnimation=function(){this.stopAnimation=null},r.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},r}();exports.MotionValue=r,exports.motionValue=function(t){return new r(t)};
//# sourceMappingURL=index.mjs.js.map
