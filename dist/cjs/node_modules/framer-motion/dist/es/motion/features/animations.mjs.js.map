{"version":3,"file":"animations.mjs.js","sources":["../../../../../../../../node_modules/framer-motion/dist/es/motion/features/animations.mjs"],"sourcesContent":["import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { createAnimationState } from '../../render/utils/animation-state.mjs';\nimport { AnimationType } from '../../render/utils/types.mjs';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.mjs';\n\nvar animations = {\n    animation: makeRenderlessComponent(function (_a) {\n        var visualElement = _a.visualElement, animate = _a.animate;\n        /**\n         * We dynamically generate the AnimationState manager as it contains a reference\n         * to the underlying animation library. We only want to load that if we load this,\n         * so people can optionally code split it out using the `m` component.\n         */\n        visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n        /**\n         * Subscribe any provided AnimationControls to the component's VisualElement\n         */\n        if (isAnimationControls(animate)) {\n            useEffect(function () { return animate.subscribe(visualElement); }, [animate]);\n        }\n    }),\n    exit: makeRenderlessComponent(function (props) {\n        var custom = props.custom, visualElement = props.visualElement;\n        var _a = __read(usePresence(), 2), isPresent = _a[0], safeToRemove = _a[1];\n        var presenceContext = useContext(PresenceContext);\n        useEffect(function () {\n            var _a, _b;\n            visualElement.isPresent = isPresent;\n            var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, { custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom });\n            !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(safeToRemove));\n        }, [isPresent]);\n    }),\n};\n\nexport { animations };\n"],"names":["animations","animation","makeRenderlessComponent","_a","visualElement","animate","animationState","createAnimationState","isAnimationControls","useEffect","subscribe","exit","props","custom","__read","usePresence","isPresent","safeToRemove","presenceContext","useContext","PresenceContext","_b","setActive","AnimationType","Exit","then"],"mappings":"oiBASIA,EAAa,CACbC,UAAWC,EAAAA,yBAAwB,SAAUC,GACzC,IAAIC,EAAgBD,EAAGC,cAAeC,EAAUF,EAAGE,QAMnDD,EAAcE,iBAAmBF,EAAcE,eAAiBC,EAAoBA,qBAACH,IAIjFI,EAAAA,oBAAoBH,IACpBI,2BAAU,WAAc,OAAOJ,EAAQK,UAAUN,EAAiB,GAAE,CAACC,GAEjF,IACIM,KAAMT,EAAAA,yBAAwB,SAAUU,GACpC,IAAIC,EAASD,EAAMC,OAAQT,EAAgBQ,EAAMR,cAC7CD,EAAKW,EAAMA,OAACC,gBAAe,GAAIC,EAAYb,EAAG,GAAIc,EAAed,EAAG,GACpEe,EAAkBC,2BAAWC,EAAAA,iBACjCX,EAAAA,MAAAA,QAAAA,WAAU,WACN,IAAIN,EAAIkB,EACRjB,EAAcY,UAAYA,EAC1B,IAAIf,EAAoD,QAAvCE,EAAKC,EAAcE,sBAAmC,IAAPH,OAAgB,EAASA,EAAGmB,UAAUC,EAAAA,cAAcC,MAAOR,EAAW,CAAEH,OAA4G,QAAnGQ,EAAKH,aAAyD,EAASA,EAAgBL,cAA2B,IAAPQ,EAAgBA,EAAKR,KAChRG,IAAcf,SAAsDA,EAAUwB,KAAKR,GAChG,GAAW,CAACD,GACZ"}