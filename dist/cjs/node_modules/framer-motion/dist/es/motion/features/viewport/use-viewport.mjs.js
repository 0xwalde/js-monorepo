"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../utils/process.mjs.js");require("../../../../../../react/index.js");var n=require("../../../render/utils/types.mjs.js"),r=require("../../../utils/warn-once.mjs.js"),t=require("./observers.mjs.js"),i=require("../../../../../../../_virtual/index.js");var o={some:0,all:1};function s(e,r,s,a){var u=a.root,c=a.margin,l=a.amount,v=void 0===l?"some":l,w=a.once;i.react.exports.useEffect((function(){if(e){var i={root:null==u?void 0:u.current,rootMargin:c,threshold:"number"==typeof v?v:o[v]};return t.observeIntersection(s.getInstance(),i,(function(e){var t,i=e.isIntersecting;if(r.isInView!==i&&(r.isInView=i,!w||i||!r.hasEnteredView)){i&&(r.hasEnteredView=!0),null===(t=s.animationState)||void 0===t||t.setActive(n.AnimationType.InView,i);var o=s.getProps(),a=i?o.onViewportEnter:o.onViewportLeave;null==a||a(e)}}))}}),[e,u,c,v])}function a(t,o,s,a){var u=a.fallback,c=void 0===u||u;i.react.exports.useEffect((function(){t&&c&&("production"!==e.env&&r.warnOnce(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame((function(){var e;o.hasEnteredView=!0;var r=s.getProps().onViewportEnter;null==r||r(null),null===(e=s.animationState)||void 0===e||e.setActive(n.AnimationType.InView,!0)})))}),[t])}exports.useViewport=function(e){var n=e.visualElement,r=e.whileInView,t=e.onViewportEnter,o=e.onViewportLeave,u=e.viewport,c=void 0===u?{}:u,l=i.react.exports.useRef({hasEnteredView:!1,isInView:!1}),v=Boolean(r||t||o);c.once&&l.current.hasEnteredView&&(v=!1),("undefined"==typeof IntersectionObserver?a:s)(v,l.current,n,c)};
//# sourceMappingURL=use-viewport.mjs.js.map
