"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../../../tslib/tslib.es6.js");require("../../../../../react/index.js");var r=require("../../animation/utils/is-animation-controls.mjs.js"),t=require("../../context/PresenceContext.mjs.js"),n=require("../../render/utils/variants.mjs.js"),i=require("../../utils/use-constant.mjs.js"),o=require("../../value/utils/resolve-motion-value.mjs.js"),a=require("../../context/MotionContext/index.mjs.js"),s=require("../../../../../../_virtual/index.js");function u(e,r,t,n){var i=e.scrapeMotionValuesFromProps,o=e.createRenderState,a=e.onMount,s={latestValues:l(r,t,n,i),renderState:o()};return a&&(s.mount=function(e){return a(r,e,s)}),s}function l(t,i,a,s){var u={},l=!1===(null==a?void 0:a.initial),c=s(t);for(var v in c)u[v]=o.resolveMotionValue(c[v]);var f=t.initial,j=t.animate,m=n.checkIfControllingVariants(t),x=n.checkIfVariantNode(t);i&&x&&!m&&!1!==t.inherit&&(null!=f||(f=i.initial),null!=j||(j=i.animate));var d=l||!1===f,p=d?j:f;p&&"boolean"!=typeof p&&!r.isAnimationControls(p)&&(Array.isArray(p)?p:[p]).forEach((function(r){var i=n.resolveVariantFromProps(t,r);if(i){var o=i.transitionEnd;i.transition;var a=e.__rest(i,["transitionEnd","transition"]);for(var s in a){var l=a[s];if(Array.isArray(l))l=l[d?l.length-1:0];null!==l&&(u[s]=l)}for(var s in o)u[s]=o[s]}}));return u}exports.makeUseVisualState=function(e){return function(r,n){var o=s.react.exports.useContext(a.MotionContext),l=s.react.exports.useContext(t.PresenceContext);return n?u(e,r,o,l):i.useConstant((function(){return u(e,r,o,l)}))}};
//# sourceMappingURL=use-visual-state.mjs.js.map
