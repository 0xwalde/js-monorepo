import{start as t,top as e,left as i,bottom as r,right as s}from"../enums.js";import o from"../utils/getBasePlacement.js";import a from"../utils/getMainAxisFromPlacement.js";import n from"../utils/getAltAxis.js";import{within as m,withinMaxClamp as f}from"../utils/within.js";import l from"../dom-utils/getLayoutRect.js";import d from"../dom-utils/getOffsetParent.js";import p from"../utils/detectOverflow.js";import u from"../utils/getVariation.js";import c from"../utils/getFreshSideObject.js";import{max as x,min as g}from"../utils/math.js";var h={name:"preventOverflow",enabled:!0,phase:"main",fn:function(h){var y=h.state,A=h.options,j=h.name,v=A.mainAxis,w=void 0===v||v,O=A.altAxis,b=void 0!==O&&O,D=A.boundary,B=A.rootBoundary,P=A.altBoundary,F=A.padding,L=A.tether,q=void 0===L||L,E=A.tetherOffset,I=void 0===E?0:E,M=p(y,{boundary:D,rootBoundary:B,padding:F,altBoundary:P}),R=o(y.placement),S=u(y.placement),T=!S,V=a(R),k=n(V),z=y.modifiersData.popperOffsets,C=y.rects.reference,G=y.rects.popper,H="function"==typeof I?I(Object.assign({},y.rects,{placement:y.placement})):I,J="number"==typeof H?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),K=y.modifiersData.offset?y.modifiersData.offset[y.placement]:null,N={x:0,y:0};if(z){if(w){var Q,U="y"===V?e:i,W="y"===V?r:s,X="y"===V?"height":"width",Y=z[V],Z=Y+M[U],$=Y-M[W],_=q?-G[X]/2:0,tt=S===t?C[X]:G[X],et=S===t?-G[X]:-C[X],it=y.elements.arrow,rt=q&&it?l(it):{width:0,height:0},st=y.modifiersData["arrow#persistent"]?y.modifiersData["arrow#persistent"].padding:c(),ot=st[U],at=st[W],nt=m(0,C[X],rt[X]),mt=T?C[X]/2-_-nt-ot-J.mainAxis:tt-nt-ot-J.mainAxis,ft=T?-C[X]/2+_+nt+at+J.mainAxis:et+nt+at+J.mainAxis,lt=y.elements.arrow&&d(y.elements.arrow),dt=lt?"y"===V?lt.clientTop||0:lt.clientLeft||0:0,pt=null!=(Q=null==K?void 0:K[V])?Q:0,ut=Y+ft-pt,ct=m(q?g(Z,Y+mt-pt-dt):Z,Y,q?x($,ut):$);z[V]=ct,N[V]=ct-Y}if(b){var xt,gt="x"===V?e:i,ht="x"===V?r:s,yt=z[k],At="y"===k?"height":"width",jt=yt+M[gt],vt=yt-M[ht],wt=-1!==[e,i].indexOf(R),Ot=null!=(xt=null==K?void 0:K[k])?xt:0,bt=wt?jt:yt-C[At]-G[At]-Ot+J.altAxis,Dt=wt?yt+C[At]+G[At]-Ot-J.altAxis:vt,Bt=q&&wt?f(bt,yt,Dt):m(q?bt:jt,yt,q?Dt:vt);z[k]=Bt,N[k]=Bt-yt}y.modifiersData[j]=N}},requiresIfExists:["offset"]};export{h as default};
//# sourceMappingURL=preventOverflow.js.map
