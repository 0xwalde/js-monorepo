{"version":3,"file":"getClippingRect.js","sources":["../../../../../../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js"],"sourcesContent":["import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element) {\n  var rect = getBoundingClientRect(element);\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}"],"names":["getClientRectFromMixedType","element","clippingParent","viewport","rectToClientRect","getViewportRect","isElement","rect","getBoundingClientRect","top","clientTop","left","clientLeft","bottom","clientHeight","right","clientWidth","width","height","x","y","getInnerBoundingClientRect","getDocumentRect","getDocumentElement","getClippingRect","boundary","rootBoundary","mainClippingParents","clippingParents","listScrollParents","getParentNode","clipperElement","indexOf","getComputedStyle","position","isHTMLElement","getOffsetParent","filter","contains","getNodeName","getClippingParents","concat","firstClippingParent","clippingRect","reduce","accRect","max","min"],"mappings":"yiBA4BA,SAASA,EAA2BC,EAASC,GAC3C,OAAOA,IAAmBC,EAAWC,EAAiBC,EAAgBJ,IAAYK,EAAUJ,GAd9F,SAAoCD,GAClC,IAAIM,EAAOC,EAAsBP,GASjC,OARAM,EAAKE,IAAMF,EAAKE,IAAMR,EAAQS,UAC9BH,EAAKI,KAAOJ,EAAKI,KAAOV,EAAQW,WAChCL,EAAKM,OAASN,EAAKE,IAAMR,EAAQa,aACjCP,EAAKQ,MAAQR,EAAKI,KAAOV,EAAQe,YACjCT,EAAKU,MAAQhB,EAAQe,YACrBT,EAAKW,OAASjB,EAAQa,aACtBP,EAAKY,EAAIZ,EAAKI,KACdJ,EAAKa,EAAIb,EAAKE,IACPF,CACT,CAGgHc,CAA2BnB,GAAkBE,EAAiBkB,EAAgBC,EAAmBtB,IACjN,CAsBe,SAASuB,EAAgBvB,EAASwB,EAAUC,GACzD,IAAIC,EAAmC,oBAAbF,EAlB5B,SAA4BxB,GAC1B,IAAI2B,EAAkBC,EAAkBC,EAAc7B,IAElD8B,EADoB,CAAC,WAAY,SAASC,QAAQC,EAAiBhC,GAASiC,WAAa,GACnDC,EAAclC,GAAWmC,EAAgBnC,GAAWA,EAE9F,OAAKK,EAAUyB,GAKRH,EAAgBS,QAAO,SAAUnC,GACtC,OAAOI,EAAUJ,IAAmBoC,EAASpC,EAAgB6B,IAAmD,SAAhCQ,EAAYrC,EAChG,IANW,EAOX,CAK6DsC,CAAmBvC,GAAW,GAAGwC,OAAOhB,GAC/FG,EAAkB,GAAGa,OAAOd,EAAqB,CAACD,IAClDgB,EAAsBd,EAAgB,GACtCe,EAAef,EAAgBgB,QAAO,SAAUC,EAAS3C,GAC3D,IAAIK,EAAOP,EAA2BC,EAASC,GAK/C,OAJA2C,EAAQpC,IAAMqC,EAAIvC,EAAKE,IAAKoC,EAAQpC,KACpCoC,EAAQ9B,MAAQgC,EAAIxC,EAAKQ,MAAO8B,EAAQ9B,OACxC8B,EAAQhC,OAASkC,EAAIxC,EAAKM,OAAQgC,EAAQhC,QAC1CgC,EAAQlC,KAAOmC,EAAIvC,EAAKI,KAAMkC,EAAQlC,MAC/BkC,CACR,GAAE7C,EAA2BC,EAASyC,IAKvC,OAJAC,EAAa1B,MAAQ0B,EAAa5B,MAAQ4B,EAAahC,KACvDgC,EAAazB,OAASyB,EAAa9B,OAAS8B,EAAalC,IACzDkC,EAAaxB,EAAIwB,EAAahC,KAC9BgC,EAAavB,EAAIuB,EAAalC,IACvBkC,CACT"}