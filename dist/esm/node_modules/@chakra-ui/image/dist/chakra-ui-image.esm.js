import{forwardRef as r,chakra as e}from"../../system/dist/chakra-ui-system.esm.js";import{__DEV__ as a,omit as t}from"../../utils/dist/chakra-ui-utils.esm.js";import"../../../react/index.js";import{a as n}from"../../hooks/dist/use-animation-state-5054a9f7.esm.js";import{r as o}from"../../../../_virtual/index.js";function i(){return i=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t])}return r},i.apply(this,arguments)}function l(r,e){if(null==r)return{};var a,t,n={},o=Object.keys(r);for(t=0;t<o.length;t++)a=o[t],e.indexOf(a)>=0||(n[a]=r[a]);return n}function s(r){var e=r.loading,a=r.src,t=r.srcSet,i=r.onLoad,l=r.onError,s=r.crossOrigin,c=r.sizes,f=r.ignoreFallback,u=o.exports.useState("pending"),d=u[0],g=u[1];o.exports.useEffect((function(){g(a?"loading":"pending")}),[a]);var m=o.exports.useRef(),p=o.exports.useCallback((function(){if(a){h();var r=new Image;r.src=a,s&&(r.crossOrigin=s),t&&(r.srcset=t),c&&(r.sizes=c),e&&(r.loading=e),r.onload=function(r){h(),g("loaded"),null==i||i(r)},r.onerror=function(r){h(),g("failed"),null==l||l(r)},m.current=r}}),[a,s,t,c,i,l,e]),h=function(){m.current&&(m.current.onload=null,m.current.onerror=null,m.current=null)};return n((function(){if(!f)return"loading"===d&&p(),function(){h()}}),[d,p,f]),f?"loaded":d}var c=function(r,e){return"loaded"!==r&&"beforeLoadOrError"===e||"failed"===r&&"onError"===e},f=["htmlWidth","htmlHeight","alt"],u=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"],d=o.exports.forwardRef((function(r,e){var a=r.htmlWidth,t=r.htmlHeight,n=r.alt,s=l(r,f);return o.exports.createElement("img",i({width:a,height:t,ref:e,alt:n},s))}));a&&(d.displayName="NativeImage");var g=r((function(r,a){var n=r.fallbackSrc,f=r.fallback,g=r.src,m=r.srcSet,p=r.align,h=r.fit,b=r.loading,k=r.ignoreFallback,v=r.crossOrigin,y=r.fallbackStrategy,O=void 0===y?"beforeLoadOrError":y,x=r.referrerPolicy,j=l(r,u),E=null!=b||k||!(void 0!==n||void 0!==f),S=s(i({},r,{ignoreFallback:E})),F=c(S,O),N=i({ref:a,objectFit:h,objectPosition:p},E?j:t(j,["onError","onLoad"]));return F?f||o.exports.createElement(e.img,i({as:d,className:"chakra-image__placeholder",src:n},N)):o.exports.createElement(e.img,i({as:d,src:g,srcSet:m,crossOrigin:v,loading:b,referrerPolicy:x,className:"chakra-image"},N))}));a&&(g.displayName="Image");export{g as Image,c as shouldShowFallbackImage,s as useImage};
//# sourceMappingURL=chakra-ui-image.esm.js.map
