import{useFormControlProps as e}from"../../form-control/dist/chakra-ui-form-control.esm.js";import{createStylesContext as t,chakra as r,forwardRef as n,useMultiStyleConfig as a,omitThemingProps as o}from"../../system/dist/chakra-ui-system.esm.js";import{__DEV__ as u,cx as i,normalizeEventKey as l,isNull as s,focus as c,getOwnerDocument as p,callAllHandlers as m,ariaAttr as d,getOwnerWindow as v,minSafeInteger as f,maxSafeInteger as b}from"../../utils/dist/chakra-ui-utils.esm.js";import{createContext as x,mergeRefs as y}from"../../react-utils/dist/chakra-ui-react-utils.esm.js";import"../../../react/index.js";import{Icon as h}from"../../icon/dist/chakra-ui-icon.esm.js";import{useCounter as g}from"../../counter/dist/chakra-ui-counter.esm.js";import{useBoolean as C,useUpdateEffect as k,useInterval as N,useUnmountEffect as A}from"../../hooks/dist/chakra-ui-hooks.esm.js";import{u as I,a as w,b as O}from"../../hooks/dist/use-animation-state-5054a9f7.esm.js";import{r as E}from"../../../../_virtual/index.js";function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var D=function(e){return E.exports.createElement(h,P({viewBox:"0 0 24 24"},e),E.exports.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"}))},j=function(e){return E.exports.createElement(h,P({viewBox:"0 0 24 24"},e),E.exports.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}))};function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t,r,n){E.exports.useEffect((function(){if(e.current&&n){var a=v(e.current),o=Array.isArray(t)?t:[t],u=new a.MutationObserver((function(e){for(var t,n=R(e);!(t=n()).done;){var a=t.value;"attributes"===a.type&&a.attributeName&&o.includes(a.attributeName)&&r(a)}}));return u.observe(e.current,{attributes:!0,attributeFilter:o}),function(){return u.disconnect()}}}))}var _=["focusInputOnChange","clampValueOnBlur","keepWithinRange","min","max","step","isReadOnly","isDisabled","isRequired","isInvalid","pattern","inputMode","allowMouseWheel","id","onChange","precision","name","aria-describedby","aria-label","aria-labelledby","onFocus","onBlur","onInvalid","getAriaValueText","isValidCharacter","format","parse"],B=/^[Ee0-9+\-.]$/;function K(e){return B.test(e)}function F(e){void 0===e&&(e={});var t=e,r=t.focusInputOnChange,n=void 0===r||r,a=t.clampValueOnBlur,o=void 0===a||a,u=t.keepWithinRange,i=void 0===u||u,v=t.min,x=void 0===v?f:v,h=t.max,D=void 0===h?b:h,j=t.step,M=void 0===j?1:j,R=t.isReadOnly,B=t.isDisabled,F=t.isRequired,V=t.isInvalid,q=t.pattern,U=void 0===q?"[0-9]*(.[0-9]+)?":q,L=t.inputMode,z=void 0===L?"decimal":L,W=t.allowMouseWheel,H=t.id;t.onChange,t.precision;var $=t.name,G=t["aria-describedby"],Y=t["aria-label"],J=t["aria-labelledby"],Q=t.onFocus,X=t.onBlur,Z=t.onInvalid,ee=t.getAriaValueText,te=t.isValidCharacter,re=t.format,ne=t.parse,ae=S(t,_),oe=I(Q),ue=I(X),ie=I(Z),le=I(null!=te?te:K),se=I(ee),ce=g(e),pe=ce.update,me=ce.increment,de=ce.decrement,ve=C(),fe=ve[0],be=ve[1],xe=!(R||B),ye=E.exports.useRef(null),he=E.exports.useRef(null),ge=E.exports.useRef(null),Ce=E.exports.useRef(null),ke=E.exports.useCallback((function(e){return e.split("").filter(le).join("")}),[le]),Ne=E.exports.useCallback((function(e){var t;return null!=(t=null==ne?void 0:ne(e))?t:e}),[ne]),Ae=E.exports.useCallback((function(e){var t;return(null!=(t=null==re?void 0:re(e))?t:e).toString()}),[re]);k((function(){(ce.valueAsNumber>D||ce.valueAsNumber<x)&&(null==ie||ie("rangeOverflow",Ae(ce.value),ce.valueAsNumber))}),[ce.valueAsNumber,ce.value,Ae,ie]),w((function(){if(ye.current&&ye.current.value!=ce.value){var e=Ne(ye.current.value);ce.setValue(ke(e))}}),[Ne,ke]);var Ie=E.exports.useCallback((function(e){void 0===e&&(e=M),xe&&me(e)}),[me,xe,M]),we=E.exports.useCallback((function(e){void 0===e&&(e=M),xe&&de(e)}),[de,xe,M]),Oe=function(e,t){var r=E.exports.useState(!1),n=r[0],a=r[1],o=E.exports.useState(null),u=o[0],i=o[1],l=E.exports.useState(!0),s=l[0],c=l[1],p=E.exports.useRef(null),m=function(){return clearTimeout(p.current)};N((function(){"increment"===u&&e(),"decrement"===u&&t()}),n?50:null);var d=E.exports.useCallback((function(){s&&e(),p.current=setTimeout((function(){c(!1),a(!0),i("increment")}),300)}),[e,s]),v=E.exports.useCallback((function(){s&&t(),p.current=setTimeout((function(){c(!1),a(!0),i("decrement")}),300)}),[t,s]),f=E.exports.useCallback((function(){c(!0),a(!1),m()}),[]);return A(m),{up:d,down:v,stop:f,isSpinning:n}}(Ie,we);T(ge,"disabled",Oe.stop,Oe.isSpinning),T(Ce,"disabled",Oe.stop,Oe.isSpinning);var Ee=E.exports.useCallback((function(e){if(!e.nativeEvent.isComposing){var t=Ne(e.currentTarget.value);pe(ke(t)),he.current={start:e.currentTarget.selectionStart,end:e.currentTarget.selectionEnd}}}),[pe,ke,Ne]),Pe=E.exports.useCallback((function(e){var t,r,n;null==oe||oe(e),he.current&&(e.target.selectionStart=null!=(t=he.current.start)?t:null==(r=e.currentTarget.value)?void 0:r.length,e.currentTarget.selectionEnd=null!=(n=he.current.end)?n:e.currentTarget.selectionStart)}),[oe]),Se=E.exports.useCallback((function(e){if(!e.nativeEvent.isComposing){(function(e,t){if(null==e.key)return!0;var r=e.ctrlKey||e.altKey||e.metaKey;return!(1===e.key.length&&!r)||t(e.key)})(e,le)||e.preventDefault();var t=De(e)*M,r={ArrowUp:function(){return Ie(t)},ArrowDown:function(){return we(t)},Home:function(){return pe(x)},End:function(){return pe(D)}}[l(e)];r&&(e.preventDefault(),r(e))}}),[le,M,Ie,we,pe,x,D]),De=function(e){var t=1;return(e.metaKey||e.ctrlKey)&&(t=.1),e.shiftKey&&(t=10),t},je=E.exports.useMemo((function(){var e=null==se?void 0:se(ce.value);if(!s(e))return e;var t=ce.value.toString();return t||void 0}),[ce.value,se]),Me=E.exports.useCallback((function(){var e=ce.value;""!==e&&(ce.valueAsNumber<x&&(e=x),ce.valueAsNumber>D&&(e=D),ce.cast(e))}),[ce,D,x]),Re=E.exports.useCallback((function(){be.off(),o&&Me()}),[o,be,Me]),Te=E.exports.useCallback((function(){n&&c(ye.current,{nextTick:!0})}),[n]),_e=E.exports.useCallback((function(e){e.preventDefault(),Oe.up(),Te()}),[Te,Oe]),Be=E.exports.useCallback((function(e){e.preventDefault(),Oe.down(),Te()}),[Te,Oe]);O("wheel",(function(e){var t=p(ye.current).activeElement===ye.current;if(W&&t){e.preventDefault();var r=De(e)*M,n=Math.sign(e.deltaY);-1===n?Ie(r):1===n&&we(r)}}),ye.current,{passive:!1});var Ke=E.exports.useCallback((function(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var r=B||i&&ce.isAtMax;return P({},e,{ref:y(t,ge),role:"button",tabIndex:-1,onPointerDown:m(e.onPointerDown,(function(e){r||_e(e)})),onPointerLeave:m(e.onPointerLeave,Oe.stop),onPointerUp:m(e.onPointerUp,Oe.stop),disabled:r,"aria-disabled":d(r)})}),[ce.isAtMax,i,_e,Oe.stop,B]),Fe=E.exports.useCallback((function(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var r=B||i&&ce.isAtMin;return P({},e,{ref:y(t,Ce),role:"button",tabIndex:-1,onPointerDown:m(e.onPointerDown,(function(e){r||Be(e)})),onPointerLeave:m(e.onPointerLeave,Oe.stop),onPointerUp:m(e.onPointerUp,Oe.stop),disabled:r,"aria-disabled":d(r)})}),[ce.isAtMin,i,Be,Oe.stop,B]),Ve=E.exports.useCallback((function(e,t){var r,n,a,o;return void 0===e&&(e={}),void 0===t&&(t=null),P({name:$,inputMode:z,type:"text",pattern:U,"aria-labelledby":J,"aria-label":Y,"aria-describedby":G,id:H,disabled:B},e,{readOnly:null!=(r=e.readOnly)?r:R,"aria-readonly":null!=(n=e.readOnly)?n:R,"aria-required":null!=(a=e.required)?a:F,required:null!=(o=e.required)?o:F,ref:y(ye,t),value:Ae(ce.value),role:"spinbutton","aria-valuemin":x,"aria-valuemax":D,"aria-valuenow":Number.isNaN(ce.valueAsNumber)?void 0:ce.valueAsNumber,"aria-invalid":d(null!=V?V:ce.isOutOfRange),"aria-valuetext":je,autoComplete:"off",autoCorrect:"off",onChange:m(e.onChange,Ee),onKeyDown:m(e.onKeyDown,Se),onFocus:m(e.onFocus,Pe,be.on),onBlur:m(e.onBlur,ue,Re)})}),[$,z,U,J,Y,Ae,G,H,B,F,R,V,ce.value,ce.valueAsNumber,ce.isOutOfRange,x,D,je,Ee,Se,Pe,be.on,ue,Re]);return{value:Ae(ce.value),valueAsNumber:ce.valueAsNumber,isFocused:fe,isDisabled:B,isReadOnly:R,getIncrementButtonProps:Ke,getDecrementButtonProps:Fe,getInputProps:Ve,htmlProps:ae}}var V=["htmlProps"],q=t("NumberInput"),U=q[0],L=q[1],z=x({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),W=z[0],H=z[1],$=n((function(t,n){var u=a("NumberInput",t),l=o(t),s=F(e(l)),c=s.htmlProps,p=S(s,V),m=E.exports.useMemo((function(){return p}),[p]);return E.exports.createElement(W,{value:m},E.exports.createElement(U,{value:u},E.exports.createElement(r.div,P({},c,{ref:n,className:i("chakra-numberinput",t.className),__css:P({position:"relative",zIndex:0},u.root)}))))}));u&&($.displayName="NumberInput");var G=n((function(e,t){var n=L();return E.exports.createElement(r.div,P({"aria-hidden":!0,ref:t},e,{__css:P({display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1},n.stepperGroup)}))}));u&&(G.displayName="NumberInputStepper");var Y=n((function(e,t){var n=(0,H().getInputProps)(e,t),a=L();return E.exports.createElement(r.input,P({},n,{className:i("chakra-numberinput__field",e.className),__css:P({width:"100%"},a.field)}))}));u&&(Y.displayName="NumberInputField");var J=r("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),Q=n((function(e,t){var r,n=L(),a=(0,H().getDecrementButtonProps)(e,t);return E.exports.createElement(J,P({},a,{__css:n.stepper}),null!=(r=e.children)?r:E.exports.createElement(D,null))}));u&&(Q.displayName="NumberDecrementStepper");var X=n((function(e,t){var r,n=(0,H().getIncrementButtonProps)(e,t),a=L();return E.exports.createElement(J,P({},n,{__css:a.stepper}),null!=(r=e.children)?r:E.exports.createElement(j,null))}));u&&(X.displayName="NumberIncrementStepper");export{Q as NumberDecrementStepper,X as NumberIncrementStepper,$ as NumberInput,Y as NumberInputField,G as NumberInputStepper,J as StyledStepper,F as useNumberInput};
//# sourceMappingURL=chakra-ui-number-input.esm.js.map
