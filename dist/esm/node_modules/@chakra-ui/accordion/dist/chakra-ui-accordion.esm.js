import"../../icon/dist/chakra-ui-icon.esm.js";import{createStylesContext as e,forwardRef as n,useMultiStyleConfig as o,omitThemingProps as t,chakra as r}from"../../system/dist/chakra-ui-system.esm.js";import{Collapse as i}from"../../transition/dist/chakra-ui-transition.esm.js";import{__DEV__ as s,cx as a,runIfFn as l,normalizeEventKey as c,callAllHandlers as d,isUndefined as u,isArray as p,warn as m,addItem as f,removeItem as v,focus as x}from"../../utils/dist/chakra-ui-utils.esm.js";import{createContext as h,mergeRefs as b}from"../../react-utils/dist/chakra-ui-react-utils.esm.js";import"../../../react/index.js";import{createDescendantContext as g}from"../../descendant/dist/chakra-ui-descendant.esm.js";import{useUnmountEffect as w,useControllableState as y,useIds as k}from"../../hooks/dist/chakra-ui-hooks.esm.js";import{r as A}from"../../../../_virtual/index.js";function C(){return C=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},C.apply(this,arguments)}function E(e,n){if(null==e)return{};var o,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)o=i[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}var I=["onChange","defaultIndex","index","allowMultiple","allowToggle"],P=["isDisabled","isFocusable","id"],M=g(),_=M[0],D=M[2],O=M[3];function j(e){var n=e.onChange,o=e.defaultIndex,t=e.index,r=e.allowMultiple,i=e.allowToggle,s=E(e,I);!function(e){var n=e.index||e.defaultIndex,o=!u(n)&&!p(n)&&e.allowMultiple;m({condition:!!o,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: "+typeof n+","})}(e),function(e){m({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);var a=D(),l=A.exports.useState(-1),c=l[0],d=l[1];w((function(){d(-1)}));var x=y({value:t,defaultValue:function(){return r?null!=o?o:[]:null!=o?o:-1},onChange:n}),h=x[0],b=x[1];return{index:h,setIndex:b,htmlProps:s,getAccordionItemProps:function(e){var n=!1;null!==e&&(n=p(h)?h.includes(e):h===e);return{isOpen:n,onChange:function(n){if(null!==e)if(r&&p(h)){var o=n?f(h,e):v(h,e);b(o)}else n?b(e):i&&b(-1)}}},focusedIndex:c,setFocusedIndex:d,descendants:a}}var N=h({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"}),F=N[0],T=N[1];function B(e){var n=e.isDisabled,o=e.isFocusable,t=e.id,r=E(e,P),i=T(),s=i.getAccordionItemProps,a=i.setFocusedIndex,l=A.exports.useRef(null),u=k(t,"accordion-button","accordion-panel"),p=u[0],f=u[1];!function(e){m({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);var v=O({disabled:n&&!o}),h=v.register,g=v.index,w=v.descendants,y=s(-1===g?null:g),I=y.isOpen,M=y.onChange;!function(e){m({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:I,isDisabled:n});var _=A.exports.useCallback((function(){null==M||M(!I),a(g)}),[g,a,I,M]),D=A.exports.useCallback((function(e){var n={ArrowDown:function(){var e=w.nextEnabled(g);e&&x(e.node)},ArrowUp:function(){var e=w.prevEnabled(g);e&&x(e.node)},Home:function(){var e=w.firstEnabled();e&&x(e.node)},End:function(){var e=w.lastEnabled();e&&x(e.node)}}[c(e)];n&&(e.preventDefault(),n(e))}),[w,g]),j=A.exports.useCallback((function(){a(g)}),[a,g]),N=A.exports.useCallback((function(e,o){return void 0===e&&(e={}),void 0===o&&(o=null),C({},e,{type:"button",ref:b(h,l,o),id:p,disabled:!!n,"aria-expanded":!!I,"aria-controls":f,onClick:d(e.onClick,_),onFocus:d(e.onFocus,j),onKeyDown:d(e.onKeyDown,D)})}),[p,n,I,_,j,D,f,h]),F=A.exports.useCallback((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),C({},e,{ref:n,role:"region",id:f,"aria-labelledby":p,hidden:!I})}),[p,I,f]);return{isOpen:I,isDisabled:n,isFocusable:o,onOpen:function(){null==M||M(!0)},onClose:function(){null==M||M(!1)},getButtonProps:N,getPanelProps:F,htmlProps:r}}var S=["children","reduceMotion"],K=["htmlProps","descendants"],U=["htmlProps"],H=e("Accordion"),R=H[0],V=H[1],Y=n((function(e,n){var i=e.children,s=e.reduceMotion,l=E(e,S),c=o("Accordion",l),d=j(t(l)),u=d.htmlProps,p=d.descendants,m=E(d,K),f=A.exports.useMemo((function(){return C({},m,{reduceMotion:!!s})}),[m,s]);return A.exports.createElement(_,{value:p},A.exports.createElement(F,{value:f},A.exports.createElement(R,{value:c},A.exports.createElement(r.div,C({ref:n},u,{className:a("chakra-accordion",l.className),__css:c.root}),i))))}));s&&(Y.displayName="Accordion");var q=h({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),z=q[0],G=q[1],J=n((function(e,n){var o=e.children,t=e.className,i=B(e),s=i.htmlProps,c=E(i,U),d=C({},V().container,{overflowAnchor:"none"}),u=A.exports.useMemo((function(){return c}),[c]);return A.exports.createElement(z,{value:u},A.exports.createElement(r.div,C({ref:n},s,{className:a("chakra-accordion__item",t),__css:d}),l(o,{isExpanded:!!c.isOpen,isDisabled:!!c.isDisabled})))}));s&&(J.displayName="AccordionItem");var L=n((function(e,n){var o=(0,G().getButtonProps)(e,n),t=C({display:"flex",alignItems:"center",width:"100%",outline:0},V().button);return A.exports.createElement(r.button,C({},o,{className:a("chakra-accordion__button",e.className),__css:t}))}));s&&(L.displayName="AccordionButton");var Q=n((function(e,n){var o=T().reduceMotion,t=G(),s=t.getPanelProps,l=t.isOpen,c=s(e,n),d=a("chakra-accordion__panel",e.className),u=V();o||delete c.hidden;var p=A.exports.createElement(r.div,C({},c,{__css:u.panel,className:d}));return o?p:A.exports.createElement(i,{in:l},p)}));s&&(Q.displayName="AccordionPanel");export{Y as Accordion,L as AccordionButton,_ as AccordionDescendantsProvider,J as AccordionItem,Q as AccordionPanel,F as AccordionProvider,j as useAccordion,T as useAccordionContext,O as useAccordionDescendant,D as useAccordionDescendants,B as useAccordionItem};
//# sourceMappingURL=chakra-ui-accordion.esm.js.map
