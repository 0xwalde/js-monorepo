import{createStylesContext as e,forwardRef as t,useMultiStyleConfig as n,omitThemingProps as a,chakra as r}from"../../system/dist/chakra-ui-system.esm.js";import{__DEV__ as o,cx as i,runIfFn as l,focus as s,normalizeEventKey as u,isEmpty as c,getRelatedTarget as d,contains as p,ariaAttr as b,callAllHandlers as f}from"../../utils/dist/chakra-ui-utils.esm.js";import{createContext as m,mergeRefs as v}from"../../react-utils/dist/chakra-ui-react-utils.esm.js";import"../../../react/index.js";import{useControllableState as x,useFocusOnPointerDown as h,useUpdateEffect as C}from"../../hooks/dist/chakra-ui-hooks.esm.js";import{a as k}from"../../hooks/dist/use-animation-state-5054a9f7.esm.js";import{r as E}from"../../../../_virtual/index.js";function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var P=["onChange","onCancel","onSubmit","value","isDisabled","defaultValue","startWithEditView","isPreviewFocusable","submitOnBlur","selectAllOnFocus","placeholder","onEdit"];function w(e){void 0===e&&(e={});var t=e,n=t.onChange,a=t.onCancel,r=t.onSubmit,o=t.value,i=t.isDisabled,l=t.defaultValue,m=t.startWithEditView,w=t.isPreviewFocusable,_=void 0===w||w,N=t.submitOnBlur,j=void 0===N||N,S=t.selectAllOnFocus,B=void 0===S||S,F=t.placeholder,O=t.onEdit,D=y(t,P),I=Boolean(m&&!i),K=E.exports.useState(I),T=K[0],V=K[1],R=x({defaultValue:l||"",value:o,onChange:n}),A=R[0],W=R[1],z=E.exports.useState(A),M=z[0],q=z[1],G=E.exports.useRef(null),H=E.exports.useRef(null),J=E.exports.useRef(null),L=E.exports.useRef(null),Q=E.exports.useRef(null);h({ref:G,enabled:T,elements:[L,Q]});var U=!T&&!i;k((function(){T&&s(G.current,{selectTextIfInput:B})}),[]),C((function(){T?(s(G.current,{selectTextIfInput:B}),null==O||O()):s(J.current)}),[T,O,B]);var X=E.exports.useCallback((function(){U&&V(!0)}),[U]),Y=E.exports.useCallback((function(){q(A)}),[A]),Z=E.exports.useCallback((function(){V(!1),W(M),null==a||a(M)}),[a,W,M]),$=E.exports.useCallback((function(){V(!1),q(A),null==r||r(A)}),[A,r]),ee=E.exports.useCallback((function(e){W(e.currentTarget.value)}),[W]),te=E.exports.useCallback((function(e){var t=u(e),n={Escape:Z,Enter:function(e){e.shiftKey||e.metaKey||$()}},a=n[t];a&&(e.preventDefault(),a(e))}),[Z,$]),ne=E.exports.useCallback((function(e){var t=u(e),n={Escape:Z}[t];n&&(e.preventDefault(),n(e))}),[Z]),ae=c(A),re=E.exports.useCallback((function(e){var t=d(e),n=p(L.current,t),a=p(Q.current,t);!n&&!a&&(j?$():Z())}),[j,$,Z]),oe=E.exports.useCallback((function(e,t){void 0===e&&(e={}),void 0===t&&(t=null);var n=U&&_?0:void 0;return g({},e,{ref:v(t,H),children:ae?F:A,hidden:T,"aria-disabled":b(i),tabIndex:n,onFocus:f(e.onFocus,X,Y)})}),[i,T,U,_,ae,X,Y,F,A]),ie=E.exports.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),g({},e,{hidden:!T,placeholder:F,ref:v(t,G),disabled:i,"aria-disabled":b(i),value:A,onBlur:f(e.onBlur,re),onChange:f(e.onChange,ee),onKeyDown:f(e.onKeyDown,te),onFocus:f(e.onFocus,Y)})}),[i,T,re,ee,te,Y,F,A]),le=E.exports.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),g({},e,{hidden:!T,placeholder:F,ref:v(t,G),disabled:i,"aria-disabled":b(i),value:A,onBlur:f(e.onBlur,re),onChange:f(e.onChange,ee),onKeyDown:f(e.onKeyDown,ne),onFocus:f(e.onFocus,Y)})}),[i,T,re,ee,ne,Y,F,A]),se=E.exports.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),g({"aria-label":"Edit"},e,{type:"button",onClick:f(e.onClick,X),ref:v(t,J),disabled:i})}),[X,i]),ue=E.exports.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),g({},e,{"aria-label":"Submit",ref:v(Q,t),type:"button",onClick:f(e.onClick,$),disabled:i})}),[$,i]),ce=E.exports.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),g({"aria-label":"Cancel",id:"cancel"},e,{ref:v(L,t),type:"button",onClick:f(e.onClick,Z),disabled:i})}),[Z,i]);return{isEditing:T,isDisabled:i,isValueEmpty:ae,value:A,onEdit:X,onCancel:Z,onSubmit:$,getPreviewProps:oe,getInputProps:ie,getTextareaProps:le,getEditButtonProps:se,getSubmitButtonProps:ue,getCancelButtonProps:ce,htmlProps:D}}var _=["htmlProps"],N=e("Editable"),j=N[0],S=N[1],B=m({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),F=B[0],O=B[1],D=t((function(e,t){var o=n("Editable",e),s=w(a(e)),u=s.htmlProps,c=y(s,_),d=c.isEditing,p=c.onSubmit,b=c.onCancel,f=c.onEdit,m=i("chakra-editable",e.className),v=l(e.children,{isEditing:d,onSubmit:p,onCancel:b,onEdit:f});return E.exports.createElement(F,{value:c},E.exports.createElement(j,{value:o},E.exports.createElement(r.div,g({ref:t},u,{className:m}),v)))}));o&&(D.displayName="Editable");var I={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent"},K=t((function(e,t){var n=O().getPreviewProps,a=S(),o=n(e,t),l=i("chakra-editable__preview",e.className);return E.exports.createElement(r.span,g({},o,{__css:g({cursor:"text",display:"inline-block"},I,a.preview),className:l}))}));o&&(K.displayName="EditablePreview");var T=t((function(e,t){var n=O().getInputProps,a=S(),o=n(e,t),l=i("chakra-editable__input",e.className);return E.exports.createElement(r.input,g({},o,{__css:g({outline:0},I,a.input),className:l}))}));o&&(T.displayName="EditableInput");var V=t((function(e,t){var n=O().getTextareaProps,a=S(),o=n(e,t),l=i("chakra-editable__textarea",e.className);return E.exports.createElement(r.textarea,g({},o,{__css:g({outline:0},I,a.textarea),className:l}))}));o&&(V.displayName="EditableTextarea");export{D as Editable,T as EditableInput,K as EditablePreview,V as EditableTextarea,w as useEditable};
//# sourceMappingURL=chakra-ui-editable.esm.js.map
