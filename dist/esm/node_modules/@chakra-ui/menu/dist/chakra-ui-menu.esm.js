import{createStylesContext as e,chakra as n,forwardRef as t}from"../../system/dist/chakra-ui-system.esm.js";import{__DEV__ as r,cx as o,callAll as a,normalizeEventKey as i,dataAttr as s,callAllHandlers as l,determineLazyBehavior as c,isActiveElement as u,focus as m,isHTMLElement as p,getNextItemFromSearch as d}from"../../utils/dist/chakra-ui-utils.esm.js";import"../../../react/index.js";import{useClickable as f}from"../../clickable/dist/chakra-ui-clickable.esm.js";import{createDescendantContext as v}from"../../descendant/dist/chakra-ui-descendant.esm.js";import{useShortcut as x,useId as h,useUpdateEffect as y}from"../../hooks/dist/chakra-ui-hooks.esm.js";import{createContext as b,mergeRefs as _}from"../../react-utils/dist/chakra-ui-react-utils.esm.js";import{motion as k}from"../../../framer-motion/dist/es/render/dom/motion.mjs.js";import{r as g}from"../../../../_virtual/index.js";function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},E.apply(this,arguments)}function C(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var M=["onMouseEnter","onMouseMove","onMouseLeave","onClick","isDisabled","isFocusable","closeOnSelect","type"],N=["type","isChecked"],I=v(),S=I[1],O=I[3],w=b({strict:!1,name:"MenuContext"})[1];function j(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var t=w(),r=t.onToggle,o=t.popper,a=t.openAndFocusFirstItem,c=t.openAndFocusLastItem,u=g.exports.useCallback((function(e){var n=i(e),t={Enter:a,ArrowDown:a,ArrowUp:c}[n];t&&(e.preventDefault(),e.stopPropagation(),t(e))}),[a,c]);return E({},e,{ref:_(t.buttonRef,n,o.referenceRef),id:t.buttonId,"data-active":s(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:l(e.onClick,r),onKeyDown:l(e.onKeyDown,u)})}function D(e){var n;return p(e)&&!(null==(n=e.getAttribute("role"))||!n.startsWith("menuitem"))}function A(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var t=w();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");var r=t.focusedIndex,o=t.setFocusedIndex,a=t.menuRef,s=t.isOpen,u=t.onClose,m=t.menuId,p=t.isLazy,f=t.lazyBehavior,v=t.unstable__animationState,h=S(),y=x({preventDefault:function(e){return" "!==e.key&&D(e.target)}}),b=g.exports.useCallback((function(e){var n=i(e),t={Tab:function(e){return e.preventDefault()},Escape:u,ArrowDown:function(){var e=h.nextEnabled(r);e&&o(e.index)},ArrowUp:function(){var e=h.prevEnabled(r);e&&o(e.index)}},a=t[n];if(a)return e.preventDefault(),void a(e);var s=y((function(e){var n=d(h.values(),e,(function(e){var n,t;return null!=(n=null==e||null==(t=e.node)?void 0:t.textContent)?n:""}),h.item(r));if(n){var t=h.indexOf(n.node);o(t)}}));D(e.target)&&s(e)}),[h,r,y,u,o]),k=g.exports.useRef(!1);s&&(k.current=!0);var C=c({hasBeenSelected:k.current,isLazy:p,lazyBehavior:f,isSelected:v.present});return E({},e,{ref:_(a,n),children:C?e.children:null,tabIndex:-1,role:"menu",id:m,style:E({},e.style,{transformOrigin:"var(--popper-transform-origin)"}),"aria-orientation":"vertical",onKeyDown:l(e.onKeyDown,b)})}function z(e){void 0===e&&(e={});var n=w(),t=n.popper,r=n.isOpen;return t.getPopperProps(E({},e,{style:E({visibility:r?"visible":"hidden"},e.style)}))}function F(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var t=e,r=t.onMouseEnter,o=t.onMouseMove,a=t.onMouseLeave,i=t.onClick,s=t.isDisabled,l=t.isFocusable,c=t.closeOnSelect,p=t.type,d=C(t,M),v=w(),x=v.setFocusedIndex,b=v.focusedIndex,k=v.closeOnSelect,N=v.onClose,I=v.menuRef,S=v.isOpen,j=v.menuId,A=g.exports.useRef(null),z=j+"-menuitem-"+h(),F=O({disabled:s&&!l}),L=F.index,T=F.register,P=g.exports.useCallback((function(e){null==r||r(e),s||x(L)}),[x,L,s,r]),R=g.exports.useCallback((function(e){null==o||o(e),A.current&&!u(A.current)&&P(e)}),[P,o]),B=g.exports.useCallback((function(e){null==a||a(e),s||x(-1)}),[x,s,a]),K=g.exports.useCallback((function(e){null==i||i(e),D(e.currentTarget)&&(null!=c?c:k)&&N()}),[N,i,k,c]),U=L===b,W=s&&!l;y((function(){S&&(U&&!W&&A.current?m(A.current,{nextTick:!0,selectTextIfInput:!1,preventScroll:!1}):I.current&&!u(I.current)&&m(I.current,{preventScroll:!1}))}),[U,W,I,S]);var G=f({onClick:K,onMouseEnter:P,onMouseMove:R,onMouseLeave:B,ref:_(T,A,n),isDisabled:s,isFocusable:l});return E({},d,G,{type:null!=p?p:G.type,id:z,role:"menuitem",tabIndex:U?0:-1})}function L(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var t=e,r=t.type,o=void 0===r?"radio":r,a=t.isChecked;return E({},F(C(t,N),n),{role:"menuitem"+o,"aria-checked":a})}var T=["children","as"],P=["rootProps"],R=["type"],B=["icon","iconSpacing","command","commandSpacing","children"],K=["icon","iconSpacing"],U=["title","children","className"],W=["className","children"],G=e("Menu")[1],V=t((function(e,t){var r=G();return g.exports.createElement(n.button,E({ref:t},e,{__css:E({display:"inline-flex",appearance:"none",alignItems:"center",outline:0},r.button)}))})),q=t((function(e,t){e.children;var r=e.as,a=j(C(e,T),t),i=r||V;return g.exports.createElement(i,E({},a,{className:o("chakra-menu__menu-button",e.className)}),g.exports.createElement(n.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0}},e.children))}));r&&(q.displayName="MenuButton");var H={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}};var J,Q,X=(J=n.div,"custom"in(Q=k)&&"function"==typeof Q.custom?Q.custom(J):Q(J)),Y=t((function(e,t){var r,i,s=e.rootProps,l=C(e,P),c=w(),u=c.isOpen,m=c.onTransitionEnd,p=c.unstable__animationState,d=A(l,t),f=z(s),v=G();return g.exports.createElement(n.div,E({},f,{__css:{zIndex:null!=(r=e.zIndex)?r:null==(i=v.list)?void 0:i.zIndex}}),g.exports.createElement(X,E({},d,{onUpdate:m,onAnimationComplete:a(p.onComplete,d.onAnimationComplete),className:o("chakra-menu__menu-list",d.className),variants:H,initial:!1,animate:u?"enter":"exit",__css:E({outline:0},v.list)})))}));r&&(Y.displayName="MenuList");var Z=t((function(e,t){var r=e.type,o=C(e,R),a=G(),i=o.as||r?null!=r?r:void 0:"button",s=g.exports.useMemo((function(){return E({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},a.item)}),[a.item]);return g.exports.createElement(n.button,E({ref:t,type:i},o,{__css:s}))})),$=t((function(e,n){var t=e.icon,r=e.iconSpacing,a=void 0===r?"0.75rem":r,i=e.command,s=e.commandSpacing,l=void 0===s?"0.75rem":s,c=e.children,u=F(C(e,B),n),m=t||i?g.exports.createElement("span",{style:{pointerEvents:"none",flex:1}},c):c;return g.exports.createElement(Z,E({},u,{className:o("chakra-menu__menuitem",u.className)}),t&&g.exports.createElement(oe,{fontSize:"0.8em",marginEnd:a},t),m,i&&g.exports.createElement(re,{marginStart:l},i))}));r&&($.displayName="MenuItem");var ee=function(e){return g.exports.createElement("svg",E({viewBox:"0 0 14 14",width:"1em",height:"1em"},e),g.exports.createElement("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))},ne=t((function(e,n){var t=e.icon,r=e.iconSpacing,a=void 0===r?"0.75rem":r,i=C(e,K),s=L(i,n);return g.exports.createElement(Z,E({},s,{className:o("chakra-menu__menuitem-option",i.className)}),null!==t&&g.exports.createElement(oe,{fontSize:"0.8em",marginEnd:a,opacity:e.isChecked?1:0},t||g.exports.createElement(ee,null)),g.exports.createElement("span",{style:{flex:1}},s.children))}));ne.id="MenuItemOption",r&&(ne.displayName="MenuItemOption");var te=t((function(e,t){var r=e.title,a=e.children,i=e.className,s=C(e,U),l=o("chakra-menu__group__title",i),c=G();return g.exports.createElement("div",{ref:t,className:"chakra-menu__group",role:"group"},r&&g.exports.createElement(n.p,E({className:l},s,{__css:c.groupTitle}),r),a)}));r&&(te.displayName="MenuGroup");var re=t((function(e,t){var r=G();return g.exports.createElement(n.span,E({ref:t},e,{__css:r.command,className:"chakra-menu__command"}))}));r&&(re.displayName="MenuCommand");var oe=function(e){var t=e.className,r=e.children,a=C(e,W),i=g.exports.Children.only(r),s=g.exports.isValidElement(i)?g.exports.cloneElement(i,{focusable:"false","aria-hidden":!0,className:o("chakra-menu__icon",i.props.className)}):null,l=o("chakra-menu__icon-wrapper",t);return g.exports.createElement(n.span,E({className:l},a,{__css:{flexShrink:0}}),s)};r&&(oe.displayName="MenuIcon");export{q as MenuButton,re as MenuCommand,te as MenuGroup,oe as MenuIcon,$ as MenuItem,ne as MenuItemOption,Y as MenuList,j as useMenuButton,w as useMenuContext,O as useMenuDescendant,S as useMenuDescendantsContext,F as useMenuItem,A as useMenuList,L as useMenuOption,z as useMenuPositioner};
//# sourceMappingURL=chakra-ui-menu.esm.js.map
