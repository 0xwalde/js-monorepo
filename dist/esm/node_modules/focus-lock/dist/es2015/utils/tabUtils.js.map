{"version":3,"file":"tabUtils.js","sources":["../../../../../../../node_modules/focus-lock/dist/es2015/utils/tabUtils.js"],"sourcesContent":["import { FOCUS_AUTO } from '../constants';\nimport { toArray } from './array';\nimport { tabbables } from './tabbables';\nvar queryTabbables = tabbables.join(',');\nvar queryGuardTabbables = \"\".concat(queryTabbables, \", [data-focus-guard]\");\nvar getFocusablesWithShadowDom = function (parent, withGuards) {\n    var _a;\n    return toArray(((_a = parent.shadowRoot) === null || _a === void 0 ? void 0 : _a.children) || parent.children).reduce(function (acc, child) {\n        return acc.concat(child.matches(withGuards ? queryGuardTabbables : queryTabbables) ? [child] : [], getFocusablesWithShadowDom(child));\n    }, []);\n};\nexport var getFocusables = function (parents, withGuards) {\n    return parents.reduce(function (acc, parent) {\n        return acc.concat(\n        // add all tabbables inside and within shadow DOMs in DOM order\n        getFocusablesWithShadowDom(parent, withGuards), \n        // add if node is tabbable itself\n        parent.parentNode\n            ? toArray(parent.parentNode.querySelectorAll(queryTabbables)).filter(function (node) { return node === parent; })\n            : []);\n    }, []);\n};\n/**\n * return a list of focusable nodes within an area marked as \"auto-focusable\"\n * @param parent\n */\nexport var getParentAutofocusables = function (parent) {\n    var parentFocus = parent.querySelectorAll(\"[\".concat(FOCUS_AUTO, \"]\"));\n    return toArray(parentFocus)\n        .map(function (node) { return getFocusables([node]); })\n        .reduce(function (acc, nodes) { return acc.concat(nodes); }, []);\n};\n"],"names":["queryTabbables","tabbables","join","queryGuardTabbables","concat","getFocusablesWithShadowDom","parent","withGuards","_a","toArray","shadowRoot","children","reduce","acc","child","matches","getFocusables","parents","parentNode","querySelectorAll","filter","node","getParentAutofocusables","parentFocus","FOCUS_AUTO","map","nodes"],"mappings":"6HAGA,IAAIA,EAAiBC,EAAUC,KAAK,KAChCC,EAAsB,GAAGC,OAAOJ,EAAgB,wBAChDK,EAA6B,SAAUC,EAAQC,GAC/C,IAAIC,EACJ,OAAOC,GAAsC,QAA5BD,EAAKF,EAAOI,kBAA+B,IAAPF,OAAgB,EAASA,EAAGG,WAAaL,EAAOK,UAAUC,QAAO,SAAUC,EAAKC,GACjI,OAAOD,EAAIT,OAAOU,EAAMC,QAAQR,EAAaJ,EAAsBH,GAAkB,CAACc,GAAS,GAAIT,EAA2BS,GACjI,GAAE,GACP,EACWE,EAAgB,SAAUC,EAASV,GAC1C,OAAOU,EAAQL,QAAO,SAAUC,EAAKP,GACjC,OAAOO,EAAIT,OAEXC,EAA2BC,EAAQC,GAEnCD,EAAOY,WACDT,EAAQH,EAAOY,WAAWC,iBAAiBnB,IAAiBoB,QAAO,SAAUC,GAAQ,OAAOA,IAASf,CAAO,IAC5G,GACT,GAAE,GACP,EAKWgB,EAA0B,SAAUhB,GAC3C,IAAIiB,EAAcjB,EAAOa,iBAAiB,IAAIf,OAAOoB,EAAY,MACjE,OAAOf,EAAQc,GACVE,KAAI,SAAUJ,GAAQ,OAAOL,EAAc,CAACK,OAC5CT,QAAO,SAAUC,EAAKa,GAAS,OAAOb,EAAIT,OAAOsB,KAAW,GACrE"}