import{newFocus as t,NEW_FOCUS as r}from"./solver.js";import{getAllTabbableNodes as n,getTabbableNodes as o,filterAutoFocusable as i}from"./utils/DOMutils.js";import{getAllAffectedNodes as e}from"./utils/all-affected.js";import{pickFirstFocus as u}from"./utils/firstFocus.js";import{getActiveElement as f}from"./utils/getActiveElement.js";import{isNotAGuard as s,getDataset as m,isDefined as a}from"./utils/is.js";import{getTopCommonParent as l,allParentAutofocusables as c}from"./utils/parenting.js";var p=function(p,d){var v=document&&f(),j=e(p).filter(s),g=l(v||p,p,j),M=new Map,h=n(j,M),w=o(j,M).filter((function(t){var r=t.node;return s(r)}));if(w[0]||(w=h)[0]){var x,E,O,A,D=n([g],M).map((function(t){return t.node})),F=(x=D,E=w,O=new Map,E.forEach((function(t){return O.set(t.node,t)})),x.map((function(t){return O.get(t)})).filter(a)),b=F.map((function(t){return t.node})),k=t(b,D,v,d);if(k===r){var q=i(h.map((function(t){return t.node}))).filter((A=c(j,M),function(t){var r;return t.autofocus||!!(null===(r=m(t))||void 0===r?void 0:r.autofocus)||A.indexOf(t)>=0}));return{node:q&&q.length?u(q):u(i(b))}}return void 0===k?k:F[k]}};export{p as getFocusMerge};
//# sourceMappingURL=focusMerge.js.map
