import e from"../../../@babel/runtime/helpers/esm/extends.js";import"../../../react/index.js";import"../../../prop-types/index.js";import{FOCUS_DISABLED as o,FOCUS_GROUP as t}from"../../../focus-lock/dist/es2015/constants.js";import{useMergeRefs as s}from"../../../use-callback-ref/dist/es2015/useMergeRef.js";import{hiddenGuard as r}from"./FocusGuard.js";import{mediumFocus as n,mediumBlur as c,mediumSidecar as i}from"./medium.js";import{p as a}from"../../../../_virtual/index6.js";import{r as u}from"../../../../_virtual/index.js";var p=[],d=u.exports.forwardRef((function(a,d){var l,x=u.exports.useState(),f=x[0],v=x[1],m=u.exports.useRef(),b=u.exports.useRef(!1),F=u.exports.useRef(null),h=a.children,y=a.disabled,j=a.noFocusGuards,k=a.persistentFocus,g=a.crossFrame,E=a.autoFocus,w=a.allowTextSelection,O=a.group,C=a.className,N=a.whiteList,P=a.hasPositiveIndices,R=a.shards,T=void 0===R?p:R,D=a.as,I=void 0===D?"div":D,L=a.lockProps,S=void 0===L?{}:L,A=a.sideCar,G=a.returnFocus,_=a.focusOptions,M=a.onActivation,V=a.onDeactivation,q=u.exports.useState({})[0],B=u.exports.useCallback((function(){F.current=F.current||document&&document.activeElement,m.current&&M&&M(m.current),b.current=!0}),[M]),z=u.exports.useCallback((function(){b.current=!1,V&&V(m.current)}),[V]);u.exports.useEffect((function(){y||(F.current=null)}),[]);var H=u.exports.useCallback((function(e){var o=F.current;if(o&&o.focus){var t="function"==typeof G?G(o):G;if(t){var s="object"==typeof t?t:void 0;F.current=null,e?Promise.resolve().then((function(){return o.focus(s)})):o.focus(s)}}}),[G]),J=u.exports.useCallback((function(e){b.current&&n.useMedium(e)}),[]),K=c.useMedium,Q=u.exports.useCallback((function(e){m.current!==e&&(m.current=e,v(e))}),[]);"production"!==process.env.NODE_ENV&&(void 0!==w&&console.warn("React-Focus-Lock: allowTextSelection is deprecated and enabled by default"),u.exports.useEffect((function(){m.current||console.error("FocusLock: could not obtain ref to internal node")}),[]));var U=e(((l={})[o]=y&&"disabled",l[t]=O,l),S),W=!0!==j,X=W&&"tail"!==j,Y=s([d,Q]);return u.exports.createElement(u.exports.Fragment,null,W&&[u.exports.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:y?-1:0,style:r}),P?u.exports.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:y?-1:1,style:r}):null],!y&&u.exports.createElement(A,{id:q,sideCar:i,observed:f,disabled:y,persistentFocus:k,crossFrame:g,autoFocus:E,whiteList:N,shards:T,onActivation:B,onDeactivation:z,returnFocus:H,focusOptions:_}),u.exports.createElement(I,e({ref:Y},U,{className:C,onBlur:K,onFocus:J}),h),X&&u.exports.createElement("div",{"data-focus-guard":!0,tabIndex:y?-1:0,style:r}))}));d.propTypes="production"!==process.env.NODE_ENV?{children:a.exports.node,disabled:a.exports.bool,returnFocus:a.exports.oneOfType([a.exports.bool,a.exports.object,a.exports.func]),focusOptions:a.exports.object,noFocusGuards:a.exports.bool,hasPositiveIndices:a.exports.bool,allowTextSelection:a.exports.bool,autoFocus:a.exports.bool,persistentFocus:a.exports.bool,crossFrame:a.exports.bool,group:a.exports.string,className:a.exports.string,whiteList:a.exports.func,shards:a.exports.arrayOf(a.exports.any),as:a.exports.oneOfType([a.exports.string,a.exports.func,a.exports.object]),lockProps:a.exports.object,onActivation:a.exports.func,onDeactivation:a.exports.func,sideCar:a.exports.any.isRequired}:{},d.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};export{d as default};
//# sourceMappingURL=Lock.js.map
