{"version":3,"file":"mix-complex.mjs.js","sources":["../../../../../../../node_modules/popmotion/dist/es/utils/mix-complex.mjs"],"sourcesContent":["import { complex, color } from 'style-value-types';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { isNum } from './inc.mjs';\nimport { pipe } from './pipe.mjs';\nimport { warning } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n    if (isNum(origin)) {\n        return (v) => mix(origin, target, v);\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return mixComplex(origin, target);\n    }\n}\nconst mixArray = (from, to) => {\n    const output = [...from];\n    const numValues = output.length;\n    const blendValue = from.map((fromThis, i) => getMixer(fromThis, to[i]));\n    return (v) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nconst mixObject = (origin, target) => {\n    const output = Object.assign(Object.assign({}, origin), target);\n    const blendValue = {};\n    for (const key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\nfunction analyse(value) {\n    const parsed = complex.parse(value);\n    const numValues = parsed.length;\n    let numNumbers = 0;\n    let numRGB = 0;\n    let numHSL = 0;\n    for (let i = 0; i < numValues; i++) {\n        if (numNumbers || typeof parsed[i] === \"number\") {\n            numNumbers++;\n        }\n        else {\n            if (parsed[i].hue !== undefined) {\n                numHSL++;\n            }\n            else {\n                numRGB++;\n            }\n        }\n    }\n    return { parsed, numNumbers, numRGB, numHSL };\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyse(origin);\n    const targetStats = analyse(target);\n    const canInterpolate = originStats.numHSL === targetStats.numHSL &&\n        originStats.numRGB === targetStats.numRGB &&\n        originStats.numNumbers >= targetStats.numNumbers;\n    if (canInterpolate) {\n        return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return (p) => `${p > 0 ? target : origin}`;\n    }\n};\n\nexport { mixArray, mixComplex, mixObject };\n"],"names":["getMixer","origin","target","isNum","v","mix","color","test","mixColor","mixComplex","mixArray","from","to","output","numValues","length","blendValue","map","fromThis","i","mixObject","Object","assign","key","undefined","analyse","value","parsed","complex","parse","numNumbers","numRGB","numHSL","hue","template","createTransformer","originStats","targetStats","pipe","warning","p"],"mappings":"wYAOA,SAASA,EAASC,EAAQC,GACtB,OAAIC,EAAMF,GACEG,GAAMC,EAAIJ,EAAQC,EAAQE,GAE7BE,EAAMC,KAAKN,GACTO,EAASP,EAAQC,GAGjBO,EAAWR,EAAQC,EAElC,CACK,MAACQ,EAAW,CAACC,EAAMC,KACpB,MAAMC,EAAS,IAAIF,GACbG,EAAYD,EAAOE,OACnBC,EAAaL,EAAKM,KAAI,CAACC,EAAUC,IAAMnB,EAASkB,EAAUN,EAAGO,MACnE,OAAQf,IACJ,IAAK,IAAIe,EAAI,EAAGA,EAAIL,EAAWK,IAC3BN,EAAOM,GAAKH,EAAWG,GAAGf,GAE9B,OAAOS,CAAM,CAChB,EAECO,EAAY,CAACnB,EAAQC,KACvB,MAAMW,EAASQ,OAAOC,OAAOD,OAAOC,OAAO,GAAIrB,GAASC,GAClDc,EAAa,CAAA,EACnB,IAAK,MAAMO,KAAOV,OACMW,IAAhBvB,EAAOsB,SAAsCC,IAAhBtB,EAAOqB,KACpCP,EAAWO,GAAOvB,EAASC,EAAOsB,GAAMrB,EAAOqB,KAGvD,OAAQnB,IACJ,IAAK,MAAMmB,KAAOP,EACdH,EAAOU,GAAOP,EAAWO,GAAKnB,GAElC,OAAOS,CAAM,CAChB,EAEL,SAASY,EAAQC,GACb,MAAMC,EAASC,EAAQC,MAAMH,GACvBZ,EAAYa,EAAOZ,OACzB,IAAIe,EAAa,EACbC,EAAS,EACTC,EAAS,EACb,IAAK,IAAIb,EAAI,EAAGA,EAAIL,EAAWK,IACvBW,GAAmC,iBAAdH,EAAOR,GAC5BW,SAGsBN,IAAlBG,EAAOR,GAAGc,IACVD,IAGAD,IAIZ,MAAO,CAAEJ,SAAQG,aAAYC,SAAQC,SACzC,CACK,MAACvB,EAAa,CAACR,EAAQC,KACxB,MAAMgC,EAAWN,EAAQO,kBAAkBjC,GACrCkC,EAAcX,EAAQxB,GACtBoC,EAAcZ,EAAQvB,GAI5B,OAHuBkC,EAAYJ,SAAWK,EAAYL,QACtDI,EAAYL,SAAWM,EAAYN,QACnCK,EAAYN,YAAcO,EAAYP,WAE/BQ,EAAK5B,EAAS0B,EAAYT,OAAQU,EAAYV,QAASO,IAG9DK,GAAQ,EAAM,mBAAmBtC,WAAgBC,6KACzCsC,GAAM,GAAGA,EAAI,EAAItC,EAASD,IACrC"}