{"version":3,"file":"interpolate.mjs.js","sources":["../../../../../../../node_modules/popmotion/dist/es/utils/interpolate.mjs"],"sourcesContent":["import { progress } from './progress.mjs';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.mjs';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.mjs';\nimport { pipe } from './pipe.mjs';\nimport { invariant } from 'hey-listen';\n\nconst mixNumber = (from, to) => (p) => mix(from, to, p);\nfunction detectMixerFactory(v) {\n    if (typeof v === 'number') {\n        return mixNumber;\n    }\n    else if (typeof v === 'string') {\n        if (color.test(v)) {\n            return mixColor;\n        }\n        else {\n            return mixComplex;\n        }\n    }\n    else if (Array.isArray(v)) {\n        return mixArray;\n    }\n    else if (typeof v === 'object') {\n        return mixObject;\n    }\n}\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || detectMixerFactory(output[0]);\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\nfunction fastInterpolate([from, to], [mixer]) {\n    return (v) => mixer(progress(from, to, v));\n}\nfunction slowInterpolate(input, mixers) {\n    const inputLength = input.length;\n    const lastInputIndex = inputLength - 1;\n    return (v) => {\n        let mixerIndex = 0;\n        let foundMixerIndex = false;\n        if (v <= input[0]) {\n            foundMixerIndex = true;\n        }\n        else if (v >= input[lastInputIndex]) {\n            mixerIndex = lastInputIndex - 1;\n            foundMixerIndex = true;\n        }\n        if (!foundMixerIndex) {\n            let i = 1;\n            for (; i < inputLength; i++) {\n                if (input[i] > v || i === lastInputIndex) {\n                    break;\n                }\n            }\n            mixerIndex = i - 1;\n        }\n        const progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n        return mixers[mixerIndex](progressInRange);\n    };\n}\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n    if (input[0] > input[inputLength - 1]) {\n        input = [].concat(input);\n        output = [].concat(output);\n        input.reverse();\n        output.reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const interpolator = inputLength === 2\n        ? fastInterpolate(input, mixers)\n        : slowInterpolate(input, mixers);\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n"],"names":["mixNumber","from","to","p","mix","createMixers","output","ease","customMixer","mixers","mixerFactory","v","color","test","mixColor","mixComplex","Array","isArray","mixArray","mixObject","numMixers","length","i","mixer","easingFunction","pipe","push","interpolate","input","clamp","isClamp","inputLength","invariant","concat","reverse","interpolator","progress","fastInterpolate","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","slowInterpolate"],"mappings":"mbASA,MAAMA,EAAY,CAACC,EAAMC,IAAQC,GAAMC,EAAIH,EAAMC,EAAIC,GAoBrD,SAASE,EAAaC,EAAQC,EAAMC,GAChC,MAAMC,EAAS,GACTC,EAAeF,IApBJ,iBADOG,EAqB+BL,EAAO,IAnBnDN,EAEW,iBAANW,EACRC,EAAMC,KAAKF,GACJG,EAGAC,EAGNC,MAAMC,QAAQN,GACZO,EAEW,iBAANP,EACLQ,OADN,GAfT,IAA4BR,EAsBxB,MAAMS,EAAYd,EAAOe,OAAS,EAClC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAWE,IAAK,CAChC,IAAIC,EAAQb,EAAaJ,EAAOgB,GAAIhB,EAAOgB,EAAI,IAC/C,GAAIf,EAAM,CACN,MAAMiB,EAAiBR,MAAMC,QAAQV,GAAQA,EAAKe,GAAKf,EACvDgB,EAAQE,EAAKD,EAAgBD,EAChC,CACDd,EAAOiB,KAAKH,EACf,CACD,OAAOd,CACX,CA8BA,SAASkB,EAAYC,EAAOtB,GAAUuB,MAAOC,GAAU,EAAIvB,KAAEA,EAAIgB,MAAEA,GAAU,IACzE,MAAMQ,EAAcH,EAAMP,OAC1BW,EAAUD,IAAgBzB,EAAOe,OAAQ,wDACzCW,GAAWzB,IAASS,MAAMC,QAAQV,IAASA,EAAKc,SAAWU,EAAc,EAAG,oIACxEH,EAAM,GAAKA,EAAMG,EAAc,KAC/BH,EAAQ,GAAGK,OAAOL,GAClBtB,EAAS,GAAG2B,OAAO3B,GACnBsB,EAAMM,UACN5B,EAAO4B,WAEX,MAAMzB,EAASJ,EAAaC,EAAQC,EAAMgB,GACpCY,EAA+B,IAAhBJ,EAxCzB,UAA0B9B,EAAMC,IAAMqB,IAClC,OAAQZ,GAAMY,EAAMa,EAASnC,EAAMC,EAAIS,GAC3C,CAuCU0B,CAAgBT,EAAOnB,GAtCjC,SAAyBmB,EAAOnB,GAC5B,MAAMsB,EAAcH,EAAMP,OACpBiB,EAAiBP,EAAc,EACrC,OAAQpB,IACJ,IAAI4B,EAAa,EACbC,GAAkB,EAQtB,GAPI7B,GAAKiB,EAAM,GACXY,GAAkB,EAEb7B,GAAKiB,EAAMU,KAChBC,EAAaD,EAAiB,EAC9BE,GAAkB,IAEjBA,EAAiB,CAClB,IAAIlB,EAAI,EACR,KAAOA,EAAIS,KACHH,EAAMN,GAAKX,GAAKW,IAAMgB,GADNhB,KAKxBiB,EAAajB,EAAI,CACpB,CACD,MAAMmB,EAAkBL,EAASR,EAAMW,GAAaX,EAAMW,EAAa,GAAI5B,GAC3E,OAAOF,EAAO8B,GAAYE,EAAgB,CAElD,CAcUC,CAAgBd,EAAOnB,GAC7B,OAAOqB,EACAnB,GAAMwB,EAAaN,EAAMD,EAAM,GAAIA,EAAMG,EAAc,GAAIpB,IAC5DwB,CACV"}