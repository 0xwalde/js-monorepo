import"../../../../react/index.js";import{isNodeOrChild as t}from"./utils/is-node-or-child.mjs.js";import{usePointerEvent as n,addPointerEvent as e}from"../events/use-pointer-event.mjs.js";import{useUnmountEffect as r}from"../utils/use-unmount-effect.mjs.js";import{AnimationType as o}from"../render/utils/types.mjs.js";import{isDragActive as i}from"./drag/utils/lock.mjs.js";import{pipe as s}from"../../../../popmotion/dist/es/utils/pipe.mjs.js";import{r as u}from"../../../../../_virtual/index.js";function l(l){var a=l.onTap,p=l.onTapStart,m=l.onTapCancel,c=l.whileTap,f=l.visualElement,v=a||p||m||c,d=u.exports.useRef(!1),j=u.exports.useRef(null),w={passive:!(p||a||m||h)};function T(){var t;null===(t=j.current)||void 0===t||t.call(j),j.current=null}function x(){var t;return T(),d.current=!1,null===(t=f.animationState)||void 0===t||t.setActive(o.Tap,!1),!i()}function g(n,e){x()&&(t(f.getInstance(),n.target)?null==a||a(n,e):null==m||m(n,e))}function S(t,n){x()&&(null==m||m(t,n))}function h(t,n){var r;T(),d.current||(d.current=!0,j.current=s(e(window,"pointerup",g,w),e(window,"pointercancel",S,w)),null===(r=f.animationState)||void 0===r||r.setActive(o.Tap,!0),null==p||p(t,n))}n(f,"pointerdown",v?h:void 0,w),r(T)}export{l as useTapGesture};
//# sourceMappingURL=use-tap-gesture.mjs.js.map
