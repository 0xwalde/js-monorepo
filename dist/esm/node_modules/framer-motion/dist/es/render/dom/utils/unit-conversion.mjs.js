import{__assign as t,__read as e}from"../../../../../../tslib/tslib.es6.js";import{isKeyframesTarget as r}from"../../../animation/utils/is-keyframes-target.mjs.js";import{invariant as n}from"../../../../../../hey-listen/dist/hey-listen.es.js";import{transformProps as o}from"../../html/utils/transform.mjs.js";import{findDimensionValueType as a}from"../value-types/dimensions.mjs.js";import{px as i}from"../../../../../../style-value-types/dist/es/numbers/units.mjs.js";import{number as s}from"../../../../../../style-value-types/dist/es/numbers/index.mjs.js";var u,f=new Set(["width","height","top","left","right","bottom","x","y"]),l=function(t){return f.has(t)},m=function(t,e){t.set(e,!1),t.set(e)},p=function(t){return t===s||t===i};!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(u||(u={}));var c=function(t,e){return parseFloat(t.split(", ")[e])},d=function(t,e){return function(r,n){var o=n.transform;if("none"===o||!o)return 0;var a=o.match(/^matrix3d\((.+)\)$/);if(a)return c(a[1],e);var i=o.match(/^matrix\((.+)\)$/);return i?c(i[1],t):0}},h=new Set(["x","y","z"]),v=o.filter((function(t){return!h.has(t)}));var g={width:function(t,e){var r=t.x,n=e.paddingLeft,o=void 0===n?"0":n,a=e.paddingRight,i=void 0===a?"0":a;return r.max-r.min-parseFloat(o)-parseFloat(i)},height:function(t,e){var r=t.y,n=e.paddingTop,o=void 0===n?"0":n,a=e.paddingBottom,i=void 0===a?"0":a;return r.max-r.min-parseFloat(o)-parseFloat(i)},top:function(t,e){var r=e.top;return parseFloat(r)},left:function(t,e){var r=e.left;return parseFloat(r)},bottom:function(t,e){var r=t.y,n=e.top;return parseFloat(n)+(r.max-r.min)},right:function(t,e){var r=t.x,n=e.left;return parseFloat(n)+(r.max-r.min)},x:d(4,13),y:d(5,14)},y=function(o,s,u,f){void 0===u&&(u={}),void 0===f&&(f={}),s=t({},s),f=t({},f);var c=Object.keys(s).filter(l),d=[],h=!1,y=[];if(c.forEach((function(t){var e=o.getValue(t);if(o.hasValue(t)){var l,c=u[t],g=a(c),x=s[t];if(r(x)){var j=x.length,b=null===x[0]?1:0;c=x[b],g=a(c);for(var w=b;w<j;w++)l?n(a(x[w])===l,"All keyframes must be of the same type"):(l=a(x[w]),n(l===g||p(g)&&p(l),"Keyframes must be of the same dimension as the current value"))}else l=a(x);if(g!==l)if(p(g)&&p(l)){var F=e.get();"string"==typeof F&&e.set(parseFloat(F)),"string"==typeof x?s[t]=parseFloat(x):Array.isArray(x)&&l===i&&(s[t]=x.map(parseFloat))}else(null==g?void 0:g.transform)&&(null==l?void 0:l.transform)&&(0===c||0===x)?0===c?e.set(l.transform(c)):s[t]=g.transform(x):(h||(d=function(t){var e=[];return v.forEach((function(r){var n=t.getValue(r);void 0!==n&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),e.length&&t.syncRender(),e}(o),h=!0),y.push(t),f[t]=void 0!==f[t]?f[t]:s[t],m(e,x))}})),y.length){var x=y.indexOf("height")>=0?window.pageYOffset:null,j=function(t,e,r){var n=e.measureViewportBox(),o=e.getInstance(),a=getComputedStyle(o),i=a.display,s={};"none"===i&&e.setStaticValue("display",t.display||"block"),r.forEach((function(t){s[t]=g[t](n,a)})),e.syncRender();var u=e.measureViewportBox();return r.forEach((function(r){var n=e.getValue(r);m(n,s[r]),t[r]=g[r](u,a)})),t}(s,o,y);return d.length&&d.forEach((function(t){var r=e(t,2),n=r[0],a=r[1];o.getValue(n).set(a)})),o.syncRender(),null!==x&&window.scrollTo({top:x}),{target:j,transitionEnd:f}}return{target:s,transitionEnd:f}};function x(t,e,r,n){return function(t){return Object.keys(t).some(l)}(e)?y(t,e,r,n):{target:e,transitionEnd:n}}export{u as BoundingBoxDimension,g as positionalValues,x as unitConversion};
//# sourceMappingURL=unit-conversion.mjs.js.map
