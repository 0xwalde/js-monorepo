import{__assign as e,__rest as t,__spreadArray as o,__read as r}from"../../../../../tslib/tslib.es6.js";import{secondsToMilliseconds as n}from"../../utils/time-conversion.mjs.js";import{isEasingArray as a,easingDefinitionToFunction as i}from"./easing.mjs.js";import{isAnimatable as l}from"./is-animatable.mjs.js";import{getDefaultTransition as s}from"./default-transitions.mjs.js";import{warning as p}from"../../../../../hey-listen/dist/hey-listen.es.js";import{getAnimatableNone as u}from"../../render/dom/value-types/animatable-none.mjs.js";import{instantAnimationState as m}from"../../utils/use-instant-transition-state.mjs.js";import{resolveFinalValueInKeyframes as y}from"../../utils/resolve-value.mjs.js";import{inertia as f}from"../../../../../popmotion/dist/es/animations/inertia.mjs.js";import{animate as c}from"../../../../../popmotion/dist/es/animations/index.mjs.js";function d(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var o=t(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(o).length}var v=!1;function j(o){var r=o.ease,l=o.times,s=o.yoyo,u=o.flip,m=o.loop,y=t(o,["ease","times","yoyo","flip","loop"]),f=e({},y);return l&&(f.offset=l),y.duration&&(f.duration=n(y.duration)),y.repeatDelay&&(f.repeatDelay=n(y.repeatDelay)),r&&(f.ease=a(r)?r.map(i):i(r)),"tween"===y.type&&(f.type="keyframes"),(s||m||u)&&(p(!v,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),v=!0,s?f.repeatType="reverse":m?f.repeatType="loop":u&&(f.repeatType="mirror"),f.repeat=m||s||u||y.repeat),"spring"!==y.type&&(f.type="keyframes"),f}function g(e,t){var o,r;return null!==(r=null!==(o=(A(e,t)||{}).delay)&&void 0!==o?o:e.delay)&&void 0!==r?r:0}function h(e){return Array.isArray(e.to)&&null===e.to[0]&&(e.to=o([],r(e.to),!1),e.to[0]=e.from),e}function b(t,o,r){var n;return Array.isArray(o.to)&&(null!==(n=t.duration)&&void 0!==n||(t.duration=.8)),h(o),d(t)||(t=e(e({},t),s(r,o.to))),e(e({},o),j(t))}function C(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function T(e){return"number"==typeof e?0:u("",e)}function A(e,t){return e[t]||e.default||e}function D(t,o,r,a){return void 0===a&&(a={}),m.current&&(a={type:!1}),o.start((function(i){var s,m,d=function(t,o,r,n,a){var i,s=A(n,t),m=null!==(i=s.from)&&void 0!==i?i:o.get(),d=l(t,r);"none"===m&&d&&"string"==typeof r?m=u(t,r):C(m)&&"string"==typeof r?m=T(r):!Array.isArray(r)&&C(r)&&"string"==typeof m&&(r=T(m));var v=l(t,m);return p(v===d,"You are trying to animate ".concat(t,' from "').concat(m,'" to "').concat(r,'". ').concat(m," is not an animatable value - to enable this animation set ").concat(m," to a value animatable to ").concat(r," via the `style` property.")),v&&d&&!1!==s.type?function(){var n={from:m,to:r,velocity:o.getVelocity(),onComplete:a,onUpdate:function(e){return o.set(e)}};return"inertia"===s.type||"decay"===s.type?f(e(e({},n),s)):c(e(e({},b(s,n,t)),{onUpdate:function(e){var t;n.onUpdate(e),null===(t=s.onUpdate)||void 0===t||t.call(s,e)},onComplete:function(){var e;n.onComplete(),null===(e=s.onComplete)||void 0===e||e.call(s)}}))}:function(){var e,t,n=y(r);return o.set(n),a(),null===(e=null==s?void 0:s.onUpdate)||void 0===e||e.call(s,n),null===(t=null==s?void 0:s.onComplete)||void 0===t||t.call(s),{stop:function(){}}}}(t,o,r,a,i),v=g(a,t),j=function(){return m=d()};return v?s=window.setTimeout(j,n(v)):j(),function(){clearTimeout(s),null==m||m.stop()}}))}export{j as convertTransitionToAnimationOptions,g as getDelayFromTransition,b as getPopmotionAnimationOptions,A as getValueTransition,T as getZeroUnit,h as hydrateKeyframes,d as isTransitionDefined,C as isZero,D as startAnimation};
//# sourceMappingURL=transitions.mjs.js.map
