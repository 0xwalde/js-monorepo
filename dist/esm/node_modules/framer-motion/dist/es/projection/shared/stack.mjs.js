import{addUniqueItem as e,removeItem as t}from"../../utils/array.mjs.js";var o=function(){function o(){this.members=[]}return o.prototype.add=function(t){e(this.members,t),t.scheduleRender()},o.prototype.remove=function(e){if(t(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var o=this.members[this.members.length-1];o&&this.promote(o)}},o.prototype.relegate=function(e){var t,o=this.members.findIndex((function(t){return e===t}));if(0===o)return!1;for(var s=o;s>=0;s--){var i=this.members[s];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},o.prototype.promote=function(e,t){var o,s=this.lead;e!==s&&(this.prevLead=s,this.lead=e,e.show(),s&&(s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues,e.snapshot.isShared=!0),(null===(o=e.root)||void 0===o?void 0:o.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&s.hide()))},o.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,o,s,i,r;null===(o=(t=e.options).onExitComplete)||void 0===o||o.call(t),null===(r=null===(s=e.resumingFrom)||void 0===s?void 0:(i=s.options).onExitComplete)||void 0===r||r.call(i)}))},o.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},o.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},o}();export{o as NodeStack};
//# sourceMappingURL=stack.mjs.js.map
