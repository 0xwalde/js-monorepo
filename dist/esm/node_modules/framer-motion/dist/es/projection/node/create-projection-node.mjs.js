import{__spreadArray as t,__read as e,__assign as i}from"../../../../../tslib/tslib.es6.js";import o,{cancelSync as s,flushSync as a}from"../../../../node_modules/framesync/dist/es/index.mjs.js";import{animate as r}from"../../animation/animate.mjs.js";import{SubscriptionManager as n}from"../../utils/subscription-manager.mjs.js";import{mixValues as l}from"../animation/mix-values.mjs.js";import{copyBoxInto as h}from"../geometry/copy.mjs.js";import{translateAxis as u,transformBox as p,applyBoxDelta as d,applyTreeDeltas as c}from"../geometry/delta-apply.mjs.js";import{calcRelativePosition as m,calcRelativeBox as v,calcBoxDelta as f,calcLength as y}from"../geometry/delta-calc.mjs.js";import{removeBoxTransforms as g}from"../geometry/delta-remove.mjs.js";import{createBox as T,createDelta as j}from"../geometry/models.mjs.js";import{getValueTransition as S}from"../../animation/utils/transitions.mjs.js";import{boxEquals as P,isDeltaZero as A}from"../geometry/utils.mjs.js";import{NodeStack as V}from"../shared/stack.mjs.js";import{scaleCorrectors as L}from"../styles/scale-correction.mjs.js";import{buildProjectionTransform as R}from"../styles/transform.mjs.js";import{eachAxis as x}from"../utils/each-axis.mjs.js";import{hasTransform as D,hasScale as E}from"../utils/has-transform.mjs.js";import{transformAxes as k}from"../../render/html/utils/transform.mjs.js";import{FlatTree as U}from"../../render/utils/flat-tree.mjs.js";import{resolveMotionValue as F}from"../../value/utils/resolve-motion-value.mjs.js";import{globalProjectionState as B}from"./state.mjs.js";import{mix as C}from"../../../../../popmotion/dist/es/utils/mix.mjs.js";function O(y){var x=y.attachResizeListener,C=y.defaultParent,O=y.measureScroll,J=y.checkIsScrollRoot,Z=y.resetTransform;return function(){function y(i,o,s){var a=this;void 0===o&&(o={}),void 0===s&&(s=null==C?void 0:C()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){a.isUpdating&&(a.isUpdating=!1,a.clearAllSnapshots())},this.updateProjection=function(){a.nodes.forEach(H),a.nodes.forEach(W)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=i,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?t(t([],e(s.path),!1),[s],!1):[],this.parent=s,this.depth=s?s.depth+1:0,i&&this.root.registerPotentialNode(i,this);for(var r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new U)}return y.prototype.addEventListener=function(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new n),this.eventHandlers.get(t).add(e)},y.prototype.notifyListeners=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a=this.eventHandlers.get(i);null==a||a.notify.apply(a,t([],e(o),!1))},y.prototype.hasListeners=function(t){return this.eventHandlers.has(t)},y.prototype.registerPotentialNode=function(t,e){this.potentialNodes.set(t,e)},y.prototype.mount=function(t,e){var o,s=this;if(void 0===e&&(e=!1),!this.instance){this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;var a=this.options,r=a.layoutId,n=a.layout,l=a.visualElement;if(l&&!l.getInstance()&&l.mount(t),this.root.nodes.add(this),null===(o=this.parent)||void 0===o||o.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),e&&(n||r)&&(this.isLayoutDirty=!0),x){var h,u=function(){return s.root.updateBlockedByResize=!1};x(t,(function(){s.root.updateBlockedByResize=!0,clearTimeout(h),h=window.setTimeout(u,250),B.hasAnimatedSinceResize&&(B.hasAnimatedSinceResize=!1,s.nodes.forEach(z))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&l&&(r||n)&&this.addEventListener("didUpdate",(function(t){var e,o,a,r,n,h=t.delta,u=t.hasLayoutChanged,p=t.hasRelativeTargetChanged,d=t.layout;if(s.isTreeAnimationBlocked())return s.target=void 0,void(s.relativeTarget=void 0);var c=null!==(o=null!==(e=s.options.transition)&&void 0!==e?e:l.getDefaultTransition())&&void 0!==o?o:X,m=l.getProps(),v=m.onLayoutAnimationStart,f=m.onLayoutAnimationComplete,y=!s.targetLayout||!P(s.targetLayout,d)||p,g=!u&&p;if((null===(a=s.resumeFrom)||void 0===a?void 0:a.instance)||g||u&&(y||!s.currentAnimation)){s.resumeFrom&&(s.resumingFrom=s.resumeFrom,s.resumingFrom.resumingFrom=void 0),s.setAnimationOrigin(h,g);var T=i(i({},S(c,"layout")),{onPlay:v,onComplete:f});l.shouldReduceMotion&&(T.delay=0,T.type=!1),s.startAnimation(T)}else u||0!==s.animationProgress||s.finishAnimation(),s.isLead()&&(null===(n=(r=s.options).onExitComplete)||void 0===n||n.call(r));s.targetLayout=d}))}},y.prototype.unmount=function(){var t,e;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(t=this.getStack())||void 0===t||t.remove(this),null===(e=this.parent)||void 0===e||e.children.delete(this),this.instance=void 0,s.preRender(this.updateProjection)},y.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},y.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},y.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},y.prototype.isTreeAnimationBlocked=function(){var t;return this.isAnimationBlocked||(null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimationBlocked())||!1},y.prototype.startUpdate=function(){var t;this.isUpdateBlocked()||(this.isUpdating=!0,null===(t=this.nodes)||void 0===t||t.forEach(G))},y.prototype.willUpdate=function(t){var e,i,o;if(void 0===t&&(t=!0),this.root.isUpdateBlocked())null===(i=(e=this.options).onExitComplete)||void 0===i||i.call(e);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var s=0;s<this.path.length;s++){var a=this.path[s];a.shouldResetTransform=!0,a.updateScroll()}var r=this.options,n=r.layoutId,l=r.layout;if(void 0!==n||l){var h=null===(o=this.options.visualElement)||void 0===o?void 0:o.getProps().transformTemplate;this.prevTransformTemplateValue=null==h?void 0:h(this.latestValues,""),this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}}},y.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(b);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Y),this.potentialNodes.clear()),this.nodes.forEach(I),this.nodes.forEach(w),this.nodes.forEach(N),this.clearAllSnapshots(),a.update(),a.preRender(),a.render())},y.prototype.clearAllSnapshots=function(){this.nodes.forEach(M),this.sharedNodes.forEach(q)},y.prototype.scheduleUpdateProjection=function(){o.preRender(this.updateProjection,!1,!0)},y.prototype.scheduleCheckAfterUnmount=function(){var t=this;o.postRender((function(){t.isLayoutDirty?t.root.didUpdate():t.root.checkUpdateFailed()}))},y.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var t=this.measure(),e=this.removeTransform(this.removeElementScroll(t));$(e),this.snapshot={measured:t,layout:e,latestValues:{}}}},y.prototype.updateLayout=function(){var t;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var i=this.measure();$(i);var o=this.layout;this.layout={measured:i,actual:this.removeElementScroll(i)},this.layoutCorrected=T(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(t=this.options.visualElement)||void 0===t||t.notifyLayoutMeasure(this.layout.actual,null==o?void 0:o.actual)}},y.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=J(this.instance),this.scroll=O(this.instance))},y.prototype.resetTransform=function(){var t;if(Z){var e=this.isLayoutDirty||this.shouldResetTransform,i=this.projectionDelta&&!A(this.projectionDelta),o=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate,s=null==o?void 0:o(this.latestValues,""),a=s!==this.prevTransformTemplateValue;e&&(i||D(this.latestValues)||a)&&(Z(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}},y.prototype.measure=function(){var t=this.options.visualElement;if(!t)return T();var e=t.measureViewportBox(),i=this.root.scroll;return i&&(u(e.x,i.x),u(e.y,i.y)),e},y.prototype.removeElementScroll=function(t){var e=T();h(e,t);for(var i=0;i<this.path.length;i++){var o=this.path[i],s=o.scroll,a=o.options,r=o.isScrollRoot;if(o!==this.root&&s&&a.layoutScroll){if(r){h(e,t);var n=this.root.scroll;n&&(u(e.x,-n.x),u(e.y,-n.y))}u(e.x,s.x),u(e.y,s.y)}}return e},y.prototype.applyTransform=function(t,e){void 0===e&&(e=!1);var i=T();h(i,t);for(var o=0;o<this.path.length;o++){var s=this.path[o];!e&&s.options.layoutScroll&&s.scroll&&s!==s.root&&p(i,{x:-s.scroll.x,y:-s.scroll.y}),D(s.latestValues)&&p(i,s.latestValues)}return D(this.latestValues)&&p(i,this.latestValues),i},y.prototype.removeTransform=function(t){var e,i=T();h(i,t);for(var o=0;o<this.path.length;o++){var s=this.path[o];if(s.instance&&D(s.latestValues)){E(s.latestValues)&&s.updateSnapshot();var a=T(),r=s.measure();h(a,r),g(i,s.latestValues,null===(e=s.snapshot)||void 0===e?void 0:e.layout,a)}}return D(this.latestValues)&&g(i,this.latestValues),i},y.prototype.setTargetDelta=function(t){this.targetDelta=t,this.root.scheduleUpdateProjection()},y.prototype.setOptions=function(t){var e;this.options=i(i(i({},this.options),t),{crossfade:null===(e=t.crossfade)||void 0===e||e})},y.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},y.prototype.resolveTargetDelta=function(){var t,e=this.options,i=e.layout,o=e.layoutId;this.layout&&(i||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=T(),this.relativeTargetOrigin=T(),m(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),h(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target=T(),this.targetWithTransforms=T()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(t=this.relativeParent)||void 0===t?void 0:t.target)?v(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):h(this.target,this.layout.actual),d(this.target,this.targetDelta)):h(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=T(),this.relativeTargetOrigin=T(),m(this.relativeTargetOrigin,this.target,this.relativeParent.target),h(this.relativeTarget,this.relativeTargetOrigin)))))},y.prototype.getClosestProjectingParent=function(){if(this.parent&&!D(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},y.prototype.calcProjection=function(){var t,e=this.options,i=e.layout,o=e.layoutId;if(this.isTreeAnimating=Boolean((null===(t=this.parent)||void 0===t?void 0:t.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(i||o)){var s=this.getLead();h(this.layoutCorrected,this.layout.actual),c(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==s);var a=s.target;if(a){this.projectionDelta||(this.projectionDelta=j(),this.projectionDeltaWithTransform=j());var r=this.treeScale.x,n=this.treeScale.y,l=this.projectionTransform;f(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=R(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===r&&this.treeScale.y===n||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}}},y.prototype.hide=function(){this.isVisible=!1},y.prototype.show=function(){this.isVisible=!0},y.prototype.scheduleRender=function(t){var e,i,o;void 0===t&&(t=!0),null===(i=(e=this.options).scheduleRender)||void 0===i||i.call(e),t&&(null===(o=this.getStack())||void 0===o||o.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},y.prototype.setAnimationOrigin=function(t,e){var o,s=this;void 0===e&&(e=!1);var a=this.snapshot,r=(null==a?void 0:a.latestValues)||{},n=i({},this.latestValues),h=j();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!e;var u=T(),p=null==a?void 0:a.isShared,d=((null===(o=this.getStack())||void 0===o?void 0:o.members.length)||0)<=1,c=Boolean(p&&!d&&!0===this.options.crossfade&&!this.path.some(Q));this.animationProgress=0,this.mixTargetDelta=function(e){var i,o=e/1e3;_(h.x,t.x,o),_(h.y,t.y,o),s.setTargetDelta(h),s.relativeTarget&&s.relativeTargetOrigin&&s.layout&&(null===(i=s.relativeParent)||void 0===i?void 0:i.layout)&&(m(u,s.layout.actual,s.relativeParent.layout.actual),K(s.relativeTarget,s.relativeTargetOrigin,u,o)),p&&(s.animationValues=n,l(n,r,s.latestValues,o,c,d)),s.root.scheduleUpdateProjection(),s.scheduleRender(),s.animationProgress=o},this.mixTargetDelta(0)},y.prototype.startAnimation=function(t){var e,a,n=this;this.notifyListeners("animationStart"),null===(e=this.currentAnimation)||void 0===e||e.stop(),this.resumingFrom&&(null===(a=this.resumingFrom.currentAnimation)||void 0===a||a.stop()),this.pendingAnimation&&(s.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=o.update((function(){B.hasAnimatedSinceResize=!0,n.currentAnimation=r(0,1e3,i(i({},t),{onUpdate:function(e){var i;n.mixTargetDelta(e),null===(i=t.onUpdate)||void 0===i||i.call(t,e)},onComplete:function(){var e;null===(e=t.onComplete)||void 0===e||e.call(t),n.completeAnimation()}})),n.resumingFrom&&(n.resumingFrom.currentAnimation=n.currentAnimation),n.pendingAnimation=void 0}))},y.prototype.completeAnimation=function(){var t;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(t=this.getStack())||void 0===t||t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},y.prototype.finishAnimation=function(){var t;this.currentAnimation&&(null===(t=this.mixTargetDelta)||void 0===t||t.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},y.prototype.applyTransformsToTarget=function(){var t=this.getLead(),e=t.targetWithTransforms,i=t.target,o=t.layout,s=t.latestValues;e&&i&&o&&(h(e,i),p(e,s),f(this.projectionDeltaWithTransform,this.layoutCorrected,e,s))},y.prototype.registerSharedNode=function(t,e){var i,o,s;this.sharedNodes.has(t)||this.sharedNodes.set(t,new V),this.sharedNodes.get(t).add(e),e.promote({transition:null===(i=e.options.initialPromotionConfig)||void 0===i?void 0:i.transition,preserveFollowOpacity:null===(s=null===(o=e.options.initialPromotionConfig)||void 0===o?void 0:o.shouldPreserveFollowOpacity)||void 0===s?void 0:s.call(o,e)})},y.prototype.isLead=function(){var t=this.getStack();return!t||t.lead===this},y.prototype.getLead=function(){var t;return this.options.layoutId&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this},y.prototype.getPrevLead=function(){var t;return this.options.layoutId?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0},y.prototype.getStack=function(){var t=this.options.layoutId;if(t)return this.root.sharedNodes.get(t)},y.prototype.promote=function(t){var e=void 0===t?{}:t,i=e.needsReset,o=e.transition,s=e.preserveFollowOpacity,a=this.getStack();a&&a.promote(this,s),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})},y.prototype.relegate=function(){var t=this.getStack();return!!t&&t.relegate(this)},y.prototype.resetRotation=function(){var t=this.options.visualElement;if(t){for(var e=!1,i={},o=0;o<k.length;o++){var s="rotate"+k[o];t.getStaticValue(s)&&(e=!0,i[s]=t.getStaticValue(s),t.setStaticValue(s,0))}if(e){for(var s in null==t||t.syncRender(),i)t.setStaticValue(s,i[s]);t.scheduleRender()}}},y.prototype.getProjectionStyles=function(t){var e,i,o,s,a,r;void 0===t&&(t={});var n={};if(!this.instance||this.isSVG)return n;if(!this.isVisible)return{visibility:"hidden"};n.visibility="";var l=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=F(t.pointerEvents)||"",n.transform=l?l(this.latestValues,""):"none",n;var h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){var u={};return this.options.layoutId&&(u.opacity=null!==(i=this.latestValues.opacity)&&void 0!==i?i:1,u.pointerEvents=F(t.pointerEvents)||""),this.hasProjected&&!D(this.latestValues)&&(u.transform=l?l({},""):"none",this.hasProjected=!1),u}var p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),n.transform=R(this.projectionDeltaWithTransform,this.treeScale,p),l&&(n.transform=l(p,n.transform));var d=this.projectionDelta,c=d.x,m=d.y;for(var v in n.transformOrigin="".concat(100*c.origin,"% ").concat(100*m.origin,"% 0"),h.animationValues?n.opacity=h===this?null!==(s=null!==(o=p.opacity)&&void 0!==o?o:this.latestValues.opacity)&&void 0!==s?s:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:n.opacity=h===this?null!==(a=p.opacity)&&void 0!==a?a:"":null!==(r=p.opacityExit)&&void 0!==r?r:0,L)if(void 0!==p[v]){var f=L[v],y=f.correct,g=f.applyTo,T=y(p[v],h);if(g)for(var j=g.length,S=0;S<j;S++)n[g[S]]=T;else n[v]=T}return this.options.layoutId&&(n.pointerEvents=h===this?F(t.pointerEvents)||"":"none"),n},y.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},y.prototype.resetTree=function(){this.root.nodes.forEach((function(t){var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(b),this.root.sharedNodes.clear()},y}()}function w(t){t.updateLayout()}function N(t){var e,i,o,s,a=null!==(i=null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)&&void 0!==i?i:t.snapshot;if(t.isLead()&&t.layout&&a&&t.hasListeners("didUpdate")){var r=t.layout,n=r.actual,l=r.measured;"size"===t.options.animationType?x((function(t){var e=a.isShared?a.measured[t]:a.layout[t],i=y(e);e.min=n[t].min,e.max=e.min+i})):"position"===t.options.animationType&&x((function(t){var e=a.isShared?a.measured[t]:a.layout[t],i=y(n[t]);e.max=e.min+i}));var h=j();f(h,n,a.layout);var u=j();a.isShared?f(u,t.applyTransform(l,!0),a.measured):f(u,n,a.layout);var p=!A(h),d=!1;if(!t.resumeFrom&&(t.relativeParent=t.getClosestProjectingParent(),t.relativeParent&&!t.relativeParent.resumeFrom)){var c=t.relativeParent,v=c.snapshot,g=c.layout;if(v&&g){var S=T();m(S,a.layout,v.layout);var V=T();m(V,n,g.actual),P(S,V)||(d=!0)}}t.notifyListeners("didUpdate",{layout:n,snapshot:a,delta:u,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:d})}else t.isLead()&&(null===(s=(o=t.options).onExitComplete)||void 0===s||s.call(o));t.options.transition=void 0}function M(t){t.clearSnapshot()}function b(t){t.clearMeasurements()}function I(t){var e=t.options.visualElement;(null==e?void 0:e.getProps().onBeforeLayoutMeasure)&&e.notifyBeforeLayoutMeasure(),t.resetTransform()}function z(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0}function H(t){t.resolveTargetDelta()}function W(t){t.calcProjection()}function G(t){t.resetRotation()}function q(t){t.removeLeadSnapshot()}function _(t,e,i){t.translate=C(e.translate,0,i),t.scale=C(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function J(t,e,i,o){t.min=C(e.min,i.min,o),t.max=C(e.max,i.max,o)}function K(t,e,i,o){J(t.x,e.x,i.x,o),J(t.y,e.y,i.y,o)}function Q(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}var X={duration:.45,ease:[.4,0,.1,1]};function Y(t,e){for(var i=t.root,o=t.path.length-1;o>=0;o--)if(Boolean(t.path[o].instance)){i=t.path[o];break}var s=(i&&i!==t.root?i.instance:document).querySelector('[data-projection-id="'.concat(e,'"]'));s&&t.mount(s,!0)}function Z(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function $(t){Z(t.x),Z(t.y)}export{O as createProjectionNode,J as mixAxis,_ as mixAxisDelta,K as mixBox};
//# sourceMappingURL=create-projection-node.mjs.js.map
